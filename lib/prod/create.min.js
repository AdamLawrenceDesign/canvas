function PreLoadImages(a){this.value=a,this.init()}function ServerRequest(a,b,c,d){this.url=a,this.type=b,this.data=c,this.callback=d,this.init()}function SaveCanvas(){this.init()}function PageStyle(a,b,c){this.website=a,this.style=b,this.type=c,this.colours=[{name:"ubl",prm:"#00578a",sec:"#0099bc",lt:"#ff8736",op:"#6caddf"},{name:"ubk",prm:"#292f33",sec:"#ffa800",lt:"#ef7622",op:"#ffa800"},{name:"ucb",prm:"#4f2d82",sec:"#ffc425",lt:"#ef7622",op:"#ffc425"},{name:"ubm",prm:"#006bb1",sec:"#0099bc",lt:"#ef7622",op:"#f6b200"},{name:"udo",prm:"#017051",sec:"#017051",lt:"#ef7622",op:"#9c1b3a"},{name:"ugr",prm:"#005c2f",sec:"#00894b",lt:"#ef7622",op:"#00894b"},{name:"ugo",prm:"#fcb600",sec:"#ffa800",lt:"#ef7622",op:"#ffa800"},{name:"uma",prm:"#711a3f",sec:"#6caddf",lt:"#ef7622",op:"#6caddf"},{name:"umn",prm:"#6f2f40",sec:"#ffa800",lt:"#ef7622",op:"#d59693"},{name:"una",prm:"#002b5c",sec:"#6caddf",lt:"#ef7622",op:"#6caddf"},{name:"une",prm:"#292f33",sec:"#ffa800",lt:"#ef7622",op:"#ffa800"},{name:"upl",prm:"#b62e2e",sec:"#ffa800",lt:"#ef7622",op:"#6caddf"},{name:"upu",prm:"#753b92",sec:"#6caddf",lt:"#ef7622",op:"#6caddf"},{name:"ute",prm:"#3ca3ac",sec:"#6caddf",lt:"#ef7622",op:"#6caddf"},{name:"ure",prm:"#c41425",sec:"#07778b",lt:"#ef7622",op:"#6caddf"},{name:"sports",prm:"#292f33",sec:"#ffa800",lt:"rgba(0, 0, 0, 0.1)",op:"#ffa800"}],this.checkPage()}function ImageUploader(a,b,c,d){this.userId=a,this.folder=c,this.defaults=b,this.callback=d,this.defaults=b,this.loadDefaults()}function Pagnation(a){this.wrap=a,this.pages=[],this.init()}function ListBuilder(a,b,c,d){this.wrap=a,this.obj=b,this.masonaryGrid=c,this.callback=d,this.init()}function LayoutManager(a,b){this.__this=a,this.obj=b,this.init()}function ElementBuilder(a,b,c){this.type=a,this.obj=b,this.callback=c,this.init()}function ScrollManager(a,b){this.wrap=$(document.getElementById(a)),this.children=$(document.getElementById(a)).children(b),this.positions=[],this.selected="",this.init()}function RotateCanvas(a,b){this.type=a,this.callback=b,this.init()}function Palette(a){this.activeObj=a,this.colours=["(8,8,8)","(112,112,112)","(255,255,255)","(255,255,204)","(204,153,102)","(102,51,0)","(204,0,51)","(255,102,51)","(255,153,0)","(255,204,51)","(153,204,0)","(0,102,51)","(0,51,102)","(0,102,204)","(102,204,204)","(102,102,204)","(102,0,102)","(153,51,102)","(255,51,102)","(255,204,204)"],this.init()}function ExportJson(a,b,c,d,e){this.type=a,this.website=b,this.userId=c,this.userName=d,this.id1=e,this.init()}function AddImages(a){this.type=a,this.init()}function AddTextItems(){this.textThemes=[[{Title:"Heading",label:"h1",displayText:"Add Headline",text:"Your Headline",background:"light",style:"seasideresortnfregular",size:39.2,lineHeight:1.4,weight:500,fill:"rgb(41,47,51)"},{Title:"SubHeading",label:"h2",displayText:"Add Subheading",text:"Your Subheading",background:"light",style:"playfair_displayregular",size:32.88,lineHeight:1.7,weight:500,fill:"rgb(163,172,178)"},{Title:"Parragraphy",label:"p",displayText:"Add Parragraph",text:"Your Parragraph",background:"light",style:"caviar_dreamsregular",size:20,lineHeight:1.62,weight:500,fill:"rgb(41,47,51)"}],[{Title:"Heading",label:"h1",displayText:"Add Headline",text:"Your Headline",background:"dark",style:"seasideresortnfregular",size:39.2,lineHeight:1.4,weight:500,fill:"rgb(255,255,255)"},{Title:"SubHeading",label:"h2",displayText:"Add Subheading",text:"Your Subheading",background:"dark",style:"playfair_displayregular",size:32.88,lineHeight:1.7,weight:500,fill:"rgb(250,250,250)"},{Title:"Parragraphy",label:"p",displayText:"Add Parragraph",text:"Your Parragraph",background:"dark",style:"caviar_dreamsregular",size:16,lineHeight:1.62,weight:500,fill:"rgb(255,255,255)"}],[{Title:"Heading",label:"h1",displayText:"Add Headline",text:"Your Headline",background:"light",style:"chunkfiveroman",size:42.2,lineHeight:1.4,weight:500,fill:"rgb(41,47,51)"},{Title:"SubHeading",label:"h2",displayText:"Add Subheading",text:"Your Subheading",background:"light",style:"alluraregular",size:32.88,lineHeight:1.7,weight:500,fill:"rgb(163,172,178)"},{Title:"Parragraphy",label:"p",displayText:"Add Parragraph",text:"Your Parragraph",background:"light",style:"playfair_displayregular",size:20,lineHeight:1.62,weight:500,fill:"rgb(41,47,51)"}],[{Title:"Heading",label:"h1",displayText:"Add Headline",text:"Your Headline",background:"dark",style:"chunkfiveroman",size:42.2,lineHeight:1.4,weight:500,fill:"rgb(255,255,255)"},{Title:"SubHeading",label:"h2",displayText:"Add Subheading",text:"Your Subheading",background:"dark",style:"alluraregular",size:32.88,lineHeight:1.7,weight:500,fill:"rgb(250,250,250)"},{Title:"Parragraphy",label:"p",displayText:"Add Parragraph",text:"Your Parragraph",background:"dark",style:"playfair_displayregular",size:16,lineHeight:1.62,weight:500,fill:"rgb(255,255,255)"}],[{Title:"Heading",label:"h1",displayText:"Add Headline",text:"Your Headline",background:"light",style:"comic_zine_otregular",size:42.2,lineHeight:1.4,weight:500,fill:"rgb(41,47,51)"},{Title:"SubHeading",label:"h2",displayText:"Add Subheading",text:"Your Subheading",background:"light",style:"amatic_scregular",size:32.88,lineHeight:1.7,weight:500,fill:"rgb(163,172,178)"},{Title:"Parragraphy",label:"p",displayText:"Add Parragraph",text:"Your Parragraph",background:"light",style:"quicksandbold",size:20,lineHeight:1.62,weight:500,fill:"rgb(41,47,51)"}],[{Title:"Heading",label:"h1",displayText:"Add Headline",text:"Your Headline",background:"dark",style:"comic_zine_otregular",size:42.2,lineHeight:1.4,weight:500,fill:"rgb(255,255,255)"},{Title:"SubHeading",label:"h2",displayText:"Add Subheading",text:"Your Subheading",background:"dark",style:"amatic_scregular",size:32.88,lineHeight:1.7,weight:500,fill:"rgb(250,250,250)"},{Title:"Parragraphy",label:"p",displayText:"Add Parragraph",text:"Your Parragraph",background:"dark",style:"quicksandbold",size:16,lineHeight:1.62,weight:500,fill:"rgb(255,255,255)"}],[{Title:"Heading",label:"h1",displayText:"Add Headline",text:"Your Headline",background:"light",style:"Tahoma, Geneva, sans-serif",size:42.2,lineHeight:1.4,weight:500,fill:"rgb(41,47,51)"},{Title:"SubHeading",label:"h2",displayText:"Add Subheading",text:"Your Subheading",background:"light",style:"Arial, Helvetica, sans-serif",size:32.88,lineHeight:1.7,weight:300,fill:"rgb(163,172,178)"},{Title:"Parragraphy",label:"p",displayText:"Add Parragraph",text:"Your Parragraph",background:"light",style:"Arial, Helvetica, sans-serif",size:20,lineHeight:1.62,weight:500,fill:"rgb(163,172,178)"}],[{Title:"Heading",label:"h1",displayText:"Add Headline",text:"Your Headline",background:"dark",style:"Tahoma, Geneva, sans-serif",size:42.2,lineHeight:1.4,weight:500,fill:"rgb(255,255,255)"},{Title:"SubHeading",label:"h2",displayText:"Add Subheading",text:"Your Subheading",background:"dark",style:"Arial, Helvetica, sans-serif",size:32.88,lineHeight:1.7,weight:500,fill:"rgb(250,250,250)"},{Title:"Parragraphy",label:"p",displayText:"Add Parragraph",text:"Your Parragraph",background:"dark",style:"Arial, Helvetica, sans-serif",size:16,lineHeight:1.62,weight:500,fill:"rgb(255,255,255)"}]],this.jsonObjs=[{ID:"TextObject1",Name:"TextObject1",Path:"assets/img/sampleText/1.jpg",JSON:'{"objects":[{"type":"rect","originX":"center","originY":"center","left":228.81,"top":151.03,"width":120,"height":120,"fill":"rgb(31,73,125)","stroke":null,"strokeWidth":1,"strokeDashArray":null,"strokeLineCap":"butt","strokeLineJoin":"miter","strokeMiterLimit":10,"scaleX":2,"scaleY":2,"angle":0,"flipX":false,"flipY":false,"opacity":1,"shadow":null,"visible":true,"clipTo":null,"backgroundColor":"","fillRule":"nonzero","globalCompositeOperation":"source-over","rx":0,"ry":0}],"background":"#fafafa"}'},{ID:"TextObject2",Name:"TextObject1",Path:"assets/img/sampleText/2.jpg",JSON:'{"objects":[{"type":"circle","originX":"center","originY":"center","left":111.92,"top":102.08,"width":60,"height":60,"fill":"rgb(75,172,198)","stroke":null,"strokeWidth":1,"strokeDashArray":null,"strokeLineCap":"butt","strokeLineJoin":"miter","strokeMiterLimit":10,"scaleX":3.08,"scaleY":3.08,"angle":0,"flipX":false,"flipY":false,"opacity":1,"shadow":null,"visible":true,"clipTo":null,"backgroundColor":"","fillRule":"nonzero","globalCompositeOperation":"source-over","radius":30,"startAngle":0,"endAngle":6.283185307179586}],"background":"#fafafa"}'},{ID:"TextObject3",Name:"TextObject1",Path:"assets/img/sampleText/3.jpg",JSON:'{"objects":[{"type":"triangle","originX":"center","originY":"center","left":200,"top":200,"width":120,"height":120,"fill":"rgb(75,172,198)","stroke":null,"strokeWidth":1,"strokeDashArray":null,"strokeLineCap":"butt","strokeLineJoin":"miter","strokeMiterLimit":10,"scaleX":2,"scaleY":2,"angle":0,"flipX":false,"flipY":false,"opacity":1,"shadow":null,"visible":true,"clipTo":null,"backgroundColor":"","fillRule":"nonzero","globalCompositeOperation":"source-over"}],"background":"#fafafa"}'},{ID:"TextObject3",Name:"TextObject1",Path:"assets/img/sampleText/4.jpg",JSON:'{"objects":[{"type":"rect","originX":"center","originY":"center","left":114.17,"top":149.08,"width":120,"height":120,"fill":"rgb(155,187,87)","stroke":null,"strokeWidth":1,"strokeDashArray":null,"strokeLineCap":"butt","strokeLineJoin":"miter","strokeMiterLimit":10,"scaleX":1.95,"scaleY":2.51,"angle":0,"flipX":false,"flipY":false,"opacity":1,"shadow":null,"visible":true,"clipTo":null,"backgroundColor":"","fillRule":"nonzero","globalCompositeOperation":"source-over","rx":0,"ry":0}],"background":"#fafafa"}'}],this.init()}function LoadAssets(a,b,c,d){this.website=a,this.userInfo=b,this.productData=c,this.textThemes=[[{Title:"Heading",label:"h1",displayText:"Add Headline",text:"Your Headline",background:"light",style:"Verdana, Geneva, sans-serif",size:42.2,lineHeight:1.4,weight:500,fill:"#292f33"},{Title:"SubHeading",label:"h2",displayText:"Add Subheading",text:"Your Subheading",background:"light",style:"Georgia, serif",size:32.88,lineHeight:1.7,weight:500,fill:"#a3acb2"},{Title:"Parragraphy",label:"p",displayText:"Add Parragraph",text:"Your Parragraph",background:"light",style:"Verdana, Geneva, sans-serif",size:20,lineHeight:1.62,weight:500,fill:"#292f33"}],[{Title:"Heading",label:"h1",displayText:"Add Headline",text:"Your Headline",background:"dark",style:"Verdana, Geneva, sans-serif",size:42.2,lineHeight:1.4,weight:500,fill:"#fff"},{Title:"SubHeading",label:"h2",displayText:"Add Subheading",text:"Your Subheading",background:"dark",style:"Georgia, serif",size:32.88,lineHeight:1.7,weight:500,fill:"#fafafa"},{Title:"Parragraphy",label:"p",displayText:"Add Parragraph",text:"Your Parragraph",background:"dark",style:"Verdana, Geneva, sans-serif",size:16,lineHeight:1.62,weight:500,fill:"#fff"}],[{Title:"Heading",label:"h1",displayText:"Add Headline",text:"Your Headline",background:"light",style:"Tahoma, Geneva, sans-serif",size:42.2,lineHeight:1.4,weight:500,fill:"#292f33"},{Title:"SubHeading",label:"h2",displayText:"Add Subheading",text:"Your Subheading",background:"light",style:"Arial, Helvetica, sans-serif",size:32.88,lineHeight:1.7,weight:300,fill:"#a3acb2"},{Title:"Parragraphy",label:"p",displayText:"Add Parragraph",text:"Your Parragraph",background:"light",style:"Arial, Helvetica, sans-serif",size:20,lineHeight:1.62,weight:500,fill:"#a3acb2"}]],this.jsonObjs=[{ID:"TextObject1",Name:"TextObject1",Path:"assets/img/sampleText/1.jpg",JSON:'{"objects":[{"type":"rect","originX":"center","originY":"center","left":228.81,"top":151.03,"width":120,"height":120,"fill":"rgb(31,73,125)","stroke":null,"strokeWidth":1,"strokeDashArray":null,"strokeLineCap":"butt","strokeLineJoin":"miter","strokeMiterLimit":10,"scaleX":2.63,"scaleY":1.12,"angle":0,"flipX":false,"flipY":false,"opacity":1,"shadow":null,"visible":true,"clipTo":null,"backgroundColor":"","fillRule":"nonzero","globalCompositeOperation":"source-over","rx":0,"ry":0},{"type":"i-text","originX":"center","originY":"center","left":225.39,"top":141.36,"width":274,"height":40,"fill":"rgb(250,250,250)","stroke":null,"strokeWidth":1,"strokeDashArray":null,"strokeLineCap":"butt","strokeLineJoin":"miter","strokeMiterLimit":10,"scaleX":0.97,"scaleY":0.97,"angle":0,"flipX":false,"flipY":false,"opacity":1,"shadow":null,"visible":true,"clipTo":null,"backgroundColor":"","fillRule":"nonzero","globalCompositeOperation":"source-over","text":"SAMPLE TEXT","fontSize":40,"fontWeight":"normal","fontFamily":"Georgia, serif","fontStyle":"","lineHeight":1,"textDecoration":"","textAlign":"center","path":null,"textBackgroundColor":"","useNative":true,"styles":{}},{"type":"i-text","originX":"center","originY":"center","left":226.36,"top":172.57,"width":339,"height":40,"fill":"rgb(250,250,250)","stroke":null,"strokeWidth":1,"strokeDashArray":null,"strokeLineCap":"butt","strokeLineJoin":"miter","strokeMiterLimit":10,"scaleX":0.48,"scaleY":0.48,"angle":0,"flipX":false,"flipY":false,"opacity":1,"shadow":null,"visible":true,"clipTo":null,"backgroundColor":"","fillRule":"nonzero","globalCompositeOperation":"source-over","text":"New and Improved","fontSize":40,"fontWeight":"normal","fontFamily":"Tahoma, Geneva, sans-serif","fontStyle":"","lineHeight":1,"textDecoration":"","textAlign":"center","path":null,"textBackgroundColor":"","useNative":true,"styles":{}}],"background":"#fafafa"}'},{ID:"TextObject2",Name:"TextObject1",Path:"assets/img/sampleText/2.jpg",JSON:'{"objects":[{"type":"circle","originX":"center","originY":"center","left":111.92,"top":102.08,"width":60,"height":60,"fill":"rgb(75,172,198)","stroke":null,"strokeWidth":1,"strokeDashArray":null,"strokeLineCap":"butt","strokeLineJoin":"miter","strokeMiterLimit":10,"scaleX":3.08,"scaleY":3.08,"angle":0,"flipX":false,"flipY":false,"opacity":1,"shadow":null,"visible":true,"clipTo":null,"backgroundColor":"","fillRule":"nonzero","globalCompositeOperation":"source-over","radius":30,"startAngle":0,"endAngle":6.283185307179586},{"type":"i-text","originX":"center","originY":"center","left":112.25,"top":98.02,"width":168,"height":40,"fill":"rgb(250,250,250)","stroke":null,"strokeWidth":1,"strokeDashArray":null,"strokeLineCap":"butt","strokeLineJoin":"miter","strokeMiterLimit":10,"scaleX":0.93,"scaleY":0.93,"angle":0,"flipX":false,"flipY":false,"opacity":1,"shadow":null,"visible":true,"clipTo":null,"backgroundColor":"","fillRule":"nonzero","globalCompositeOperation":"source-over","text":"Sample 2","fontSize":40,"fontWeight":"normal","fontFamily":"Arial, Helvetica, sans-serif","fontStyle":"","lineHeight":1,"textDecoration":"","textAlign":"center","path":null,"textBackgroundColor":"","useNative":true,"styles":{}},{"type":"i-text","originX":"center","originY":"center","left":111.81,"top":127.41,"width":306,"height":40,"fill":"rgb(250,250,250)","stroke":null,"strokeWidth":1,"strokeDashArray":null,"strokeLineCap":"butt","strokeLineJoin":"miter","strokeMiterLimit":10,"scaleX":0.38,"scaleY":0.37,"angle":0,"flipX":false,"flipY":false,"opacity":1,"shadow":null,"visible":true,"clipTo":null,"backgroundColor":"","fillRule":"nonzero","globalCompositeOperation":"source-over","text":"More Information","fontSize":40,"fontWeight":"normal","fontFamily":"Tahoma, Geneva, sans-serif","fontStyle":"","lineHeight":1,"textDecoration":"","textAlign":"center","path":null,"textBackgroundColor":"","useNative":true,"styles":{}}],"background":"#fafafa"}'},{ID:"TextObject3",Name:"TextObject1",Path:"assets/img/sampleText/3.jpg",JSON:'{"objects":[{"type":"rect","originX":"left","originY":"top","left":0,"top":0,"width":600,"height":400,"fill":"#000","stroke":null,"strokeWidth":1,"strokeDashArray":null,"strokeLineCap":"butt","strokeLineJoin":"miter","strokeMiterLimit":10,"scaleX":1,"scaleY":1,"angle":0,"flipX":false,"flipY":false,"opacity":0,"shadow":null,"visible":true,"clipTo":null,"backgroundColor":"","fillRule":"nonzero","globalCompositeOperation":"source-over","rx":0,"ry":0},{"type":"rect","originX":"center","originY":"center","left":224.69,"top":79.4,"width":120,"height":120,"fill":"rgb(192,80,77)","stroke":null,"strokeWidth":1,"strokeDashArray":null,"strokeLineCap":"butt","strokeLineJoin":"miter","strokeMiterLimit":10,"scaleX":3.91,"scaleY":1.39,"angle":0,"flipX":false,"flipY":false,"opacity":1,"shadow":null,"visible":true,"clipTo":null,"backgroundColor":"","fillRule":"nonzero","globalCompositeOperation":"source-over","rx":0,"ry":0},{"type":"i-text","originX":"center","originY":"center","left":97.25,"top":105.02,"width":175,"height":40,"fill":"rgb(250,250,250)","stroke":null,"strokeWidth":1,"strokeDashArray":null,"strokeLineCap":"butt","strokeLineJoin":"miter","strokeMiterLimit":10,"scaleX":0.93,"scaleY":0.93,"angle":0,"flipX":false,"flipY":false,"opacity":1,"shadow":null,"visible":true,"clipTo":null,"backgroundColor":"","fillRule":"nonzero","globalCompositeOperation":"source-over","text":"Themes 3","fontSize":40,"fontWeight":"normal","fontFamily":"Arial, Helvetica, sans-serif","fontStyle":"","lineHeight":1,"textDecoration":"","textAlign":"center","path":null,"textBackgroundColor":"","useNative":true,"styles":{}},{"type":"i-text","originX":"center","originY":"center","left":79.81,"top":135.19,"width":306,"height":40,"fill":"rgb(250,250,250)","stroke":null,"strokeWidth":1,"strokeDashArray":null,"strokeLineCap":"butt","strokeLineJoin":"miter","strokeMiterLimit":10,"scaleX":0.38,"scaleY":0.38,"angle":0,"flipX":false,"flipY":false,"opacity":1,"shadow":null,"visible":true,"clipTo":null,"backgroundColor":"","fillRule":"nonzero","globalCompositeOperation":"source-over","text":"More Information","fontSize":40,"fontWeight":"normal","fontFamily":"Tahoma, Geneva, sans-serif","fontStyle":"","lineHeight":1,"textDecoration":"","textAlign":"center","path":null,"textBackgroundColor":"","useNative":true,"styles":{}},{"type":"triangle","originX":"center","originY":"center","left":422.78,"top":111.89,"width":120,"height":120,"fill":"rgb(250,250,250)","stroke":null,"strokeWidth":1,"strokeDashArray":null,"strokeLineCap":"butt","strokeLineJoin":"miter","strokeMiterLimit":10,"scaleX":0.45,"scaleY":0.12,"angle":270.46,"flipX":false,"flipY":false,"opacity":1,"shadow":null,"visible":true,"clipTo":null,"backgroundColor":"","fillRule":"nonzero","globalCompositeOperation":"source-over"}],"background":"#fafafa"}'},{ID:"TextObject3",Name:"TextObject1",Path:"assets/img/sampleText/4.jpg",JSON:'{"objects":[{"type":"rect","originX":"center","originY":"center","left":114.17,"top":149.08,"width":120,"height":120,"fill":"rgb(155,187,87)","stroke":null,"strokeWidth":1,"strokeDashArray":null,"strokeLineCap":"butt","strokeLineJoin":"miter","strokeMiterLimit":10,"scaleX":1.95,"scaleY":2.51,"angle":0,"flipX":false,"flipY":false,"opacity":1,"shadow":null,"visible":true,"clipTo":null,"backgroundColor":"","fillRule":"nonzero","globalCompositeOperation":"source-over","rx":0,"ry":0},{"type":"i-text","originX":"center","originY":"center","left":99.8,"top":247.74,"width":176,"height":40,"fill":"rgb(250,250,250)","stroke":null,"strokeWidth":1,"strokeDashArray":null,"strokeLineCap":"butt","strokeLineJoin":"miter","strokeMiterLimit":10,"scaleX":0.96,"scaleY":0.96,"angle":0,"flipX":false,"flipY":false,"opacity":1,"shadow":null,"visible":true,"clipTo":null,"backgroundColor":"","fillRule":"nonzero","globalCompositeOperation":"source-over","text":"Theme 4","fontSize":40,"fontWeight":"normal","fontFamily":"Verdana, Geneva, sans-serif","fontStyle":"","lineHeight":1,"textDecoration":"","textAlign":"center","path":null,"textBackgroundColor":"","useNative":true,"styles":{}},{"type":"i-text","originX":"center","originY":"center","left":79.54,"top":276.92,"width":423,"height":40,"fill":"rgb(250,250,250)","stroke":null,"strokeWidth":1,"strokeDashArray":null,"strokeLineCap":"butt","strokeLineJoin":"miter","strokeMiterLimit":10,"scaleX":0.3,"scaleY":0.3,"angle":0,"flipX":false,"flipY":false,"opacity":1,"shadow":null,"visible":true,"clipTo":null,"backgroundColor":"","fillRule":"nonzero","globalCompositeOperation":"source-over","text":"MORE INFORMATION","fontSize":40,"fontWeight":"normal","fontFamily":"Verdana, Geneva, sans-serif","fontStyle":"","lineHeight":1,"textDecoration":"","textAlign":"center","path":null,"textBackgroundColor":"","useNative":true,"styles":{}},{"type":"triangle","originX":"center","originY":"center","left":19.24,"top":36.97,"width":120,"height":120,"fill":"rgbundefined","stroke":null,"strokeWidth":1,"strokeDashArray":null,"strokeLineCap":"butt","strokeLineJoin":"miter","strokeMiterLimit":10,"scaleX":0.33,"scaleY":0.08,"angle":89.79,"flipX":false,"flipY":false,"opacity":1,"shadow":null,"visible":true,"clipTo":null,"backgroundColor":"","fillRule":"nonzero","globalCompositeOperation":"source-over"}],"background":"#fafafa"}'}],this.callback=d,this.userImages=[],this.stockImages=[],this.init()}function CanvasGrid(a,b){this.type=a,this.callback=b,this.init()}function EventManager(a){this.type=a,this.init()}function InsertJSON(a,b){this.type=a,this.callback=b,this.init()}function SearchAndReplace(a,b,c){this.website=a,this.userInfo=b,this.callback=c,this.init()}function CanvasSetup(a,b){this.type=a,this.callback=b,this.init()}function AppInit(a,b,c,d,e,f){this.userInfo=a,this.userId=this.userInfo.userId,this.id1=this.userInfo.id1,this.id2=this.userInfo.id2,this.userName=this.userInfo.firstName,this.website=b,this.type=c,this.productId=d,this.layoutId=e,this.jsonId=f,this.init()}!function(a){jQuery.fn.extend({slimScroll:function(b){var c={width:"auto",height:"auto",size:"7px",color:"#000",position:"right",distance:"5px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px"},d=a.extend(c,b);return this.each(function(){function c(b){if(j){var b=b||window.event,c=0;b.wheelDelta&&(c=-b.wheelDelta/120),b.detail&&(c=b.detail/3);var f=b.target||b.srcTarget||b.srcElement;a(f).closest("."+d.wrapperClass).is(v.parent())&&e(c,!0),b.preventDefault&&!u&&b.preventDefault(),u||(b.returnValue=!1)}}function e(a,b,c){u=!1;var e=a,f=v.outerHeight()-A.outerHeight();if(b&&((a>15||-15>a)&&(a=Math.ceil(a/16)),e=parseInt(A.css("top"))+a*parseInt(d.wheelStep)/100*A.outerHeight(),e=Math.min(Math.max(e,0),f),e=a>0?Math.ceil(e):Math.floor(e),A.css({top:e+"px"})),p=parseInt(A.css("top"))/(v.outerHeight()-A.outerHeight()),e=p*(v[0].scrollHeight-v.outerHeight()),c){e=a;var g=e/v[0].scrollHeight*v.outerHeight();g=Math.min(Math.max(g,0),f),A.css({top:g+"px"})}v.scrollTop(e),v.trigger("slimscrolling",~~e),h(),i()}function f(){window.addEventListener?(this.addEventListener("DOMMouseScroll",c,!1),this.addEventListener("mousewheel",c,!1),this.addEventListener("MozMousePixelScroll",c,!1)):document.attachEvent("onmousewheel",c)}function g(){o=Math.max(v.outerHeight()/v[0].scrollHeight*v.outerHeight(),s),A.css({height:o+"px"});var a=o==v.outerHeight()?"none":"block";A.css({display:a})}function h(){if(g(),clearTimeout(m),p==~~p){if(u=d.allowPageScroll,q!=p){var a=0==~~p?"top":"bottom";v.trigger("slimscroll",a)}}else u=!1;return q=p,o>=v.outerHeight()?void(u=!0):(A.stop(!0,!0).fadeIn("fast"),void(d.railVisible&&z.stop(!0,!0).fadeIn("fast")))}function i(){d.alwaysVisible||(m=setTimeout(function(){d.disableFadeOut&&j||k||l||(A.fadeOut("slow"),z.fadeOut("slow"))},1e3))}var j,k,l,m,n,o,p,q,r="<div></div>",s=30,u=!1,v=a(this);if(v.parent().hasClass(d.wrapperClass)){var w=v.scrollTop();if(A=v.parent().find("."+d.barClass),z=v.parent().find("."+d.railClass),g(),a.isPlainObject(b)){if("height"in b&&"auto"==b.height){v.parent().css("height","auto"),v.css("height","auto");var x=v.parent().parent().height();v.parent().css("height",x),v.css("height",x)}if("scrollTo"in b)w=parseInt(d.scrollTo);else if("scrollBy"in b)w+=parseInt(d.scrollBy);else if("destroy"in b)return A.remove(),z.remove(),void v.unwrap();e(w,!1,!0)}}else{d.height="auto"==d.height?v.parent().height():d.height;var y=a(r).addClass(d.wrapperClass).css({position:"relative",overflow:"hidden",width:d.width,height:d.height});v.css({overflow:"hidden",width:d.width,height:d.height});var z=a(r).addClass(d.railClass).css({width:d.size,height:"100%",position:"absolute",top:0,display:d.alwaysVisible&&d.railVisible?"block":"none","border-radius":d.railBorderRadius,background:d.railColor,opacity:d.railOpacity,zIndex:90}),A=a(r).addClass(d.barClass).css({background:d.color,width:d.size,position:"absolute",top:0,opacity:d.opacity,display:d.alwaysVisible?"block":"none","border-radius":d.borderRadius,BorderRadius:d.borderRadius,MozBorderRadius:d.borderRadius,WebkitBorderRadius:d.borderRadius,zIndex:99}),B="right"==d.position?{right:d.distance}:{left:d.distance};z.css(B),A.css(B),v.wrap(y),v.parent().append(A),v.parent().append(z),d.railDraggable&&A.bind("mousedown",function(b){var c=a(document);return l=!0,t=parseFloat(A.css("top")),pageY=b.pageY,c.bind("mousemove.slimscroll",function(a){currTop=t+a.pageY-pageY,A.css("top",currTop),e(0,A.position().top,!1)}),c.bind("mouseup.slimscroll",function(a){l=!1,i(),c.unbind(".slimscroll")}),!1}).bind("selectstart.slimscroll",function(a){return a.stopPropagation(),a.preventDefault(),!1}),z.hover(function(){h()},function(){i()}),A.hover(function(){k=!0},function(){k=!1}),v.hover(function(){j=!0,h(),i()},function(){j=!1,i()}),v.bind("touchstart",function(a,b){a.originalEvent.touches.length&&(n=a.originalEvent.touches[0].pageY)}),v.bind("touchmove",function(a){if(u||a.originalEvent.preventDefault(),a.originalEvent.touches.length){var b=(n-a.originalEvent.touches[0].pageY)/d.touchScrollStep;e(b,!0),n=a.originalEvent.touches[0].pageY}}),g(),"bottom"===d.start?(A.css({top:v.outerHeight()-A.outerHeight()}),e(0,!0)):"top"!==d.start&&(e(a(d.start).position().top,null,!0),d.alwaysVisible||A.hide()),f()}}),this}}),jQuery.fn.extend({slimscroll:jQuery.fn.slimScroll})}(jQuery),!function(a){function b(){}function c(a){function c(b){b.prototype.option||(b.prototype.option=function(b){a.isPlainObject(b)&&(this.options=a.extend(!0,this.options,b))})}function e(b,c){a.fn[b]=function(e){if("string"==typeof e){for(var g=d.call(arguments,1),h=0,i=this.length;i>h;h++){var j=this[h],k=a.data(j,b);if(k)if(a.isFunction(k[e])&&"_"!==e.charAt(0)){var l=k[e].apply(k,g);if(void 0!==l)return l}else f("no such method '"+e+"' for "+b+" instance");else f("cannot call methods on "+b+" prior to initialization; attempted to call '"+e+"'")}return this}return this.each(function(){var d=a.data(this,b);d?(d.option(e),d._init()):(d=new c(this,e),a.data(this,b,d))})}}if(a){var f="undefined"==typeof console?b:function(a){console.error(a)};return a.bridget=function(a,b){c(b),e(a,b)},a.bridget}}var d=Array.prototype.slice;"function"==typeof define&&define.amd?define("jquery-bridget/jquery.bridget",["jquery"],c):c("object"==typeof exports?require("jquery"):a.jQuery)}(window),function(a){function b(b){var c=a.event;return c.target=c.target||c.srcElement||b,c}var c=document.documentElement,d=function(){};c.addEventListener?d=function(a,b,c){a.addEventListener(b,c,!1)}:c.attachEvent&&(d=function(a,c,d){a[c+d]=d.handleEvent?function(){var c=b(a);d.handleEvent.call(d,c)}:function(){var c=b(a);d.call(a,c)},a.attachEvent("on"+c,a[c+d])});var e=function(){};c.removeEventListener?e=function(a,b,c){a.removeEventListener(b,c,!1)}:c.detachEvent&&(e=function(a,b,c){a.detachEvent("on"+b,a[b+c]);try{delete a[b+c]}catch(d){a[b+c]=void 0}});var f={bind:d,unbind:e};"function"==typeof define&&define.amd?define("eventie/eventie",f):"object"==typeof exports?module.exports=f:a.eventie=f}(this),function(a){function b(a){"function"==typeof a&&(b.isReady?a():g.push(a))}function c(a){var c="readystatechange"===a.type&&"complete"!==f.readyState;b.isReady||c||d()}function d(){b.isReady=!0;for(var a=0,c=g.length;c>a;a++){var d=g[a];d()}}function e(e){return"complete"===f.readyState?d():(e.bind(f,"DOMContentLoaded",c),e.bind(f,"readystatechange",c),e.bind(a,"load",c)),b}var f=a.document,g=[];b.isReady=!1,"function"==typeof define&&define.amd?define("doc-ready/doc-ready",["eventie/eventie"],e):"object"==typeof exports?module.exports=e(require("eventie")):a.docReady=e(a.eventie)}(window),function(){function a(){}function b(a,b){for(var c=a.length;c--;)if(a[c].listener===b)return c;return-1}function c(a){return function(){return this[a].apply(this,arguments)}}var d=a.prototype,e=this,f=e.EventEmitter;d.getListeners=function(a){var b,c,d=this._getEvents();if(a instanceof RegExp){b={};for(c in d)d.hasOwnProperty(c)&&a.test(c)&&(b[c]=d[c])}else b=d[a]||(d[a]=[]);return b},d.flattenListeners=function(a){var b,c=[];for(b=0;b<a.length;b+=1)c.push(a[b].listener);return c},d.getListenersAsObject=function(a){var b,c=this.getListeners(a);return c instanceof Array&&(b={},b[a]=c),b||c},d.addListener=function(a,c){var d,e=this.getListenersAsObject(a),f="object"==typeof c;for(d in e)e.hasOwnProperty(d)&&-1===b(e[d],c)&&e[d].push(f?c:{listener:c,once:!1});return this},d.on=c("addListener"),d.addOnceListener=function(a,b){return this.addListener(a,{listener:b,once:!0})},d.once=c("addOnceListener"),d.defineEvent=function(a){return this.getListeners(a),this},d.defineEvents=function(a){for(var b=0;b<a.length;b+=1)this.defineEvent(a[b]);return this},d.removeListener=function(a,c){var d,e,f=this.getListenersAsObject(a);for(e in f)f.hasOwnProperty(e)&&(d=b(f[e],c),-1!==d&&f[e].splice(d,1));return this},d.off=c("removeListener"),d.addListeners=function(a,b){return this.manipulateListeners(!1,a,b)},d.removeListeners=function(a,b){return this.manipulateListeners(!0,a,b)},d.manipulateListeners=function(a,b,c){var d,e,f=a?this.removeListener:this.addListener,g=a?this.removeListeners:this.addListeners;if("object"!=typeof b||b instanceof RegExp)for(d=c.length;d--;)f.call(this,b,c[d]);else for(d in b)b.hasOwnProperty(d)&&(e=b[d])&&("function"==typeof e?f.call(this,d,e):g.call(this,d,e));return this},d.removeEvent=function(a){var b,c=typeof a,d=this._getEvents();if("string"===c)delete d[a];else if(a instanceof RegExp)for(b in d)d.hasOwnProperty(b)&&a.test(b)&&delete d[b];else delete this._events;return this},d.removeAllListeners=c("removeEvent"),d.emitEvent=function(a,b){var c,d,e,f,g=this.getListenersAsObject(a);for(e in g)if(g.hasOwnProperty(e))for(d=g[e].length;d--;)c=g[e][d],c.once===!0&&this.removeListener(a,c.listener),f=c.listener.apply(this,b||[]),f===this._getOnceReturnValue()&&this.removeListener(a,c.listener);return this},d.trigger=c("emitEvent"),d.emit=function(a){var b=Array.prototype.slice.call(arguments,1);return this.emitEvent(a,b)},d.setOnceReturnValue=function(a){return this._onceReturnValue=a,this},d._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},d._getEvents=function(){return this._events||(this._events={})},a.noConflict=function(){return e.EventEmitter=f,a},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return a}):"object"==typeof module&&module.exports?module.exports=a:e.EventEmitter=a}.call(this),function(a){function b(a){if(a){if("string"==typeof d[a])return a;a=a.charAt(0).toUpperCase()+a.slice(1);for(var b,e=0,f=c.length;f>e;e++)if(b=c[e]+a,"string"==typeof d[b])return b}}var c="Webkit Moz ms Ms O".split(" "),d=document.documentElement.style;"function"==typeof define&&define.amd?define("get-style-property/get-style-property",[],function(){return b}):"object"==typeof exports?module.exports=b:a.getStyleProperty=b}(window),function(a){function b(a){var b=parseFloat(a),c=-1===a.indexOf("%")&&!isNaN(b);return c&&b}function c(){}function d(){for(var a={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},b=0,c=g.length;c>b;b++){var d=g[b];a[d]=0}return a}function e(c){function e(){if(!m){m=!0;var d=a.getComputedStyle;if(j=function(){var a=d?function(a){return d(a,null)}:function(a){return a.currentStyle};return function(b){var c=a(b);return c||f("Style returned "+c+". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1"),c}}(),k=c("boxSizing")){
var e=document.createElement("div");e.style.width="200px",e.style.padding="1px 2px 3px 4px",e.style.borderStyle="solid",e.style.borderWidth="1px 2px 3px 4px",e.style[k]="border-box";var g=document.body||document.documentElement;g.appendChild(e);var h=j(e);l=200===b(h.width),g.removeChild(e)}}}function h(a){if(e(),"string"==typeof a&&(a=document.querySelector(a)),a&&"object"==typeof a&&a.nodeType){var c=j(a);if("none"===c.display)return d();var f={};f.width=a.offsetWidth,f.height=a.offsetHeight;for(var h=f.isBorderBox=!(!k||!c[k]||"border-box"!==c[k]),m=0,n=g.length;n>m;m++){var o=g[m],p=c[o];p=i(a,p);var q=parseFloat(p);f[o]=isNaN(q)?0:q}var r=f.paddingLeft+f.paddingRight,s=f.paddingTop+f.paddingBottom,t=f.marginLeft+f.marginRight,u=f.marginTop+f.marginBottom,v=f.borderLeftWidth+f.borderRightWidth,w=f.borderTopWidth+f.borderBottomWidth,x=h&&l,y=b(c.width);y!==!1&&(f.width=y+(x?0:r+v));var z=b(c.height);return z!==!1&&(f.height=z+(x?0:s+w)),f.innerWidth=f.width-(r+v),f.innerHeight=f.height-(s+w),f.outerWidth=f.width+t,f.outerHeight=f.height+u,f}}function i(b,c){if(a.getComputedStyle||-1===c.indexOf("%"))return c;var d=b.style,e=d.left,f=b.runtimeStyle,g=f&&f.left;return g&&(f.left=b.currentStyle.left),d.left=c,c=d.pixelLeft,d.left=e,g&&(f.left=g),c}var j,k,l,m=!1;return h}var f="undefined"==typeof console?c:function(a){console.error(a)},g=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];"function"==typeof define&&define.amd?define("get-size/get-size",["get-style-property/get-style-property"],e):"object"==typeof exports?module.exports=e(require("desandro-get-style-property")):a.getSize=e(a.getStyleProperty)}(window),function(a){function b(a,b){return a[g](b)}function c(a){if(!a.parentNode){var b=document.createDocumentFragment();b.appendChild(a)}}function d(a,b){c(a);for(var d=a.parentNode.querySelectorAll(b),e=0,f=d.length;f>e;e++)if(d[e]===a)return!0;return!1}function e(a,d){return c(a),b(a,d)}var f,g=function(){if(a.matchesSelector)return"matchesSelector";for(var b=["webkit","moz","ms","o"],c=0,d=b.length;d>c;c++){var e=b[c],f=e+"MatchesSelector";if(a[f])return f}}();if(g){var h=document.createElement("div"),i=b(h,"div");f=i?b:e}else f=d;"function"==typeof define&&define.amd?define("matches-selector/matches-selector",[],function(){return f}):"object"==typeof exports?module.exports=f:window.matchesSelector=f}(Element.prototype),function(a){function b(a,b){for(var c in b)a[c]=b[c];return a}function c(a){for(var b in a)return!1;return b=null,!0}function d(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}function e(a,e,f){function h(a,b){a&&(this.element=a,this.layout=b,this.position={x:0,y:0},this._create())}var i=f("transition"),j=f("transform"),k=i&&j,l=!!f("perspective"),m={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[i],n=["transform","transition","transitionDuration","transitionProperty"],o=function(){for(var a={},b=0,c=n.length;c>b;b++){var d=n[b],e=f(d);e&&e!==d&&(a[d]=e)}return a}();b(h.prototype,a.prototype),h.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},h.prototype.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},h.prototype.getSize=function(){this.size=e(this.element)},h.prototype.css=function(a){var b=this.element.style;for(var c in a){var d=o[c]||c;b[d]=a[c]}},h.prototype.getPosition=function(){var a=g(this.element),b=this.layout.options,c=b.isOriginLeft,d=b.isOriginTop,e=parseInt(a[c?"left":"right"],10),f=parseInt(a[d?"top":"bottom"],10);e=isNaN(e)?0:e,f=isNaN(f)?0:f;var h=this.layout.size;e-=c?h.paddingLeft:h.paddingRight,f-=d?h.paddingTop:h.paddingBottom,this.position.x=e,this.position.y=f},h.prototype.layoutPosition=function(){var a=this.layout.size,b=this.layout.options,c={};b.isOriginLeft?(c.left=this.position.x+a.paddingLeft+"px",c.right=""):(c.right=this.position.x+a.paddingRight+"px",c.left=""),b.isOriginTop?(c.top=this.position.y+a.paddingTop+"px",c.bottom=""):(c.bottom=this.position.y+a.paddingBottom+"px",c.top=""),this.css(c),this.emitEvent("layout",[this])};var p=l?function(a,b){return"translate3d("+a+"px, "+b+"px, 0)"}:function(a,b){return"translate("+a+"px, "+b+"px)"};h.prototype._transitionTo=function(a,b){this.getPosition();var c=this.position.x,d=this.position.y,e=parseInt(a,10),f=parseInt(b,10),g=e===this.position.x&&f===this.position.y;if(this.setPosition(a,b),g&&!this.isTransitioning)return void this.layoutPosition();var h=a-c,i=b-d,j={},k=this.layout.options;h=k.isOriginLeft?h:-h,i=k.isOriginTop?i:-i,j.transform=p(h,i),this.transition({to:j,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},h.prototype.goTo=function(a,b){this.setPosition(a,b),this.layoutPosition()},h.prototype.moveTo=k?h.prototype._transitionTo:h.prototype.goTo,h.prototype.setPosition=function(a,b){this.position.x=parseInt(a,10),this.position.y=parseInt(b,10)},h.prototype._nonTransition=function(a){this.css(a.to),a.isCleaning&&this._removeStyles(a.to);for(var b in a.onTransitionEnd)a.onTransitionEnd[b].call(this)},h.prototype._transition=function(a){if(!parseFloat(this.layout.options.transitionDuration))return void this._nonTransition(a);var b=this._transn;for(var c in a.onTransitionEnd)b.onEnd[c]=a.onTransitionEnd[c];for(c in a.to)b.ingProperties[c]=!0,a.isCleaning&&(b.clean[c]=!0);if(a.from){this.css(a.from);var d=this.element.offsetHeight;d=null}this.enableTransition(a.to),this.css(a.to),this.isTransitioning=!0};var q=j&&d(j)+",opacity";h.prototype.enableTransition=function(){this.isTransitioning||(this.css({transitionProperty:q,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(m,this,!1))},h.prototype.transition=h.prototype[i?"_transition":"_nonTransition"],h.prototype.onwebkitTransitionEnd=function(a){this.ontransitionend(a)},h.prototype.onotransitionend=function(a){this.ontransitionend(a)};var r={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};h.prototype.ontransitionend=function(a){if(a.target===this.element){var b=this._transn,d=r[a.propertyName]||a.propertyName;if(delete b.ingProperties[d],c(b.ingProperties)&&this.disableTransition(),d in b.clean&&(this.element.style[a.propertyName]="",delete b.clean[d]),d in b.onEnd){var e=b.onEnd[d];e.call(this),delete b.onEnd[d]}this.emitEvent("transitionEnd",[this])}},h.prototype.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(m,this,!1),this.isTransitioning=!1},h.prototype._removeStyles=function(a){var b={};for(var c in a)b[c]="";this.css(b)};var s={transitionProperty:"",transitionDuration:""};return h.prototype.removeTransitionStyles=function(){this.css(s)},h.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.emitEvent("remove",[this])},h.prototype.remove=function(){if(!i||!parseFloat(this.layout.options.transitionDuration))return void this.removeElem();var a=this;this.on("transitionEnd",function(){return a.removeElem(),!0}),this.hide()},h.prototype.reveal=function(){delete this.isHidden,this.css({display:""});var a=this.layout.options;this.transition({from:a.hiddenStyle,to:a.visibleStyle,isCleaning:!0})},h.prototype.hide=function(){this.isHidden=!0,this.css({display:""});var a=this.layout.options;this.transition({from:a.visibleStyle,to:a.hiddenStyle,isCleaning:!0,onTransitionEnd:{opacity:function(){this.isHidden&&this.css({display:"none"})}}})},h.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},h}var f=a.getComputedStyle,g=f?function(a){return f(a,null)}:function(a){return a.currentStyle};"function"==typeof define&&define.amd?define("outlayer/item",["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property"],e):"object"==typeof exports?module.exports=e(require("wolfy87-eventemitter"),require("get-size"),require("desandro-get-style-property")):(a.Outlayer={},a.Outlayer.Item=e(a.EventEmitter,a.getSize,a.getStyleProperty))}(window),function(a){function b(a,b){for(var c in b)a[c]=b[c];return a}function c(a){return"[object Array]"===l.call(a)}function d(a){var b=[];if(c(a))b=a;else if(a&&"number"==typeof a.length)for(var d=0,e=a.length;e>d;d++)b.push(a[d]);else b.push(a);return b}function e(a,b){var c=n(b,a);-1!==c&&b.splice(c,1)}function f(a){return a.replace(/(.)([A-Z])/g,function(a,b,c){return b+"-"+c}).toLowerCase()}function g(c,g,l,n,o,p){function q(a,c){if("string"==typeof a&&(a=h.querySelector(a)),!a||!m(a))return void(i&&i.error("Bad "+this.constructor.namespace+" element: "+a));this.element=a,this.options=b({},this.constructor.defaults),this.option(c);var d=++r;this.element.outlayerGUID=d,s[d]=this,this._create(),this.options.isInitLayout&&this.layout()}var r=0,s={};return q.namespace="outlayer",q.Item=p,q.defaults={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,isResizingContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},b(q.prototype,l.prototype),q.prototype.option=function(a){b(this.options,a)},q.prototype._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),b(this.element.style,this.options.containerStyle),this.options.isResizeBound&&this.bindResize()},q.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},q.prototype._itemize=function(a){for(var b=this._filterFindItemElements(a),c=this.constructor.Item,d=[],e=0,f=b.length;f>e;e++){var g=b[e],h=new c(g,this);d.push(h)}return d},q.prototype._filterFindItemElements=function(a){a=d(a);for(var b=this.options.itemSelector,c=[],e=0,f=a.length;f>e;e++){var g=a[e];if(m(g))if(b){o(g,b)&&c.push(g);for(var h=g.querySelectorAll(b),i=0,j=h.length;j>i;i++)c.push(h[i])}else c.push(g)}return c},q.prototype.getItemElements=function(){for(var a=[],b=0,c=this.items.length;c>b;b++)a.push(this.items[b].element);return a},q.prototype.layout=function(){this._resetLayout(),this._manageStamps();var a=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,a),this._isLayoutInited=!0},q.prototype._init=q.prototype.layout,q.prototype._resetLayout=function(){this.getSize()},q.prototype.getSize=function(){this.size=n(this.element)},q.prototype._getMeasurement=function(a,b){var c,d=this.options[a];d?("string"==typeof d?c=this.element.querySelector(d):m(d)&&(c=d),this[a]=c?n(c)[b]:d):this[a]=0},q.prototype.layoutItems=function(a,b){a=this._getItemsForLayout(a),this._layoutItems(a,b),this._postLayout()},q.prototype._getItemsForLayout=function(a){for(var b=[],c=0,d=a.length;d>c;c++){var e=a[c];e.isIgnored||b.push(e)}return b},q.prototype._layoutItems=function(a,b){function c(){d.emitEvent("layoutComplete",[d,a])}var d=this;if(!a||!a.length)return void c();this._itemsOn(a,"layout",c);for(var e=[],f=0,g=a.length;g>f;f++){var h=a[f],i=this._getItemLayoutPosition(h);i.item=h,i.isInstant=b||h.isLayoutInstant,e.push(i)}this._processLayoutQueue(e)},q.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},q.prototype._processLayoutQueue=function(a){for(var b=0,c=a.length;c>b;b++){var d=a[b];this._positionItem(d.item,d.x,d.y,d.isInstant)}},q.prototype._positionItem=function(a,b,c,d){d?a.goTo(b,c):a.moveTo(b,c)},q.prototype._postLayout=function(){this.resizeContainer()},q.prototype.resizeContainer=function(){if(this.options.isResizingContainer){var a=this._getContainerSize();a&&(this._setContainerMeasure(a.width,!0),this._setContainerMeasure(a.height,!1))}},q.prototype._getContainerSize=k,q.prototype._setContainerMeasure=function(a,b){if(void 0!==a){var c=this.size;c.isBorderBox&&(a+=b?c.paddingLeft+c.paddingRight+c.borderLeftWidth+c.borderRightWidth:c.paddingBottom+c.paddingTop+c.borderTopWidth+c.borderBottomWidth),a=Math.max(a,0),this.element.style[b?"width":"height"]=a+"px"}},q.prototype._itemsOn=function(a,b,c){function d(){return e++,e===f&&c.call(g),!0}for(var e=0,f=a.length,g=this,h=0,i=a.length;i>h;h++){var j=a[h];j.on(b,d)}},q.prototype.ignore=function(a){var b=this.getItem(a);b&&(b.isIgnored=!0)},q.prototype.unignore=function(a){var b=this.getItem(a);b&&delete b.isIgnored},q.prototype.stamp=function(a){if(a=this._find(a)){this.stamps=this.stamps.concat(a);for(var b=0,c=a.length;c>b;b++){var d=a[b];this.ignore(d)}}},q.prototype.unstamp=function(a){if(a=this._find(a))for(var b=0,c=a.length;c>b;b++){var d=a[b];e(d,this.stamps),this.unignore(d)}},q.prototype._find=function(a){return a?("string"==typeof a&&(a=this.element.querySelectorAll(a)),a=d(a)):void 0},q.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var a=0,b=this.stamps.length;b>a;a++){var c=this.stamps[a];this._manageStamp(c)}}},q.prototype._getBoundingRect=function(){var a=this.element.getBoundingClientRect(),b=this.size;this._boundingRect={left:a.left+b.paddingLeft+b.borderLeftWidth,top:a.top+b.paddingTop+b.borderTopWidth,right:a.right-(b.paddingRight+b.borderRightWidth),bottom:a.bottom-(b.paddingBottom+b.borderBottomWidth)}},q.prototype._manageStamp=k,q.prototype._getElementOffset=function(a){var b=a.getBoundingClientRect(),c=this._boundingRect,d=n(a),e={left:b.left-c.left-d.marginLeft,top:b.top-c.top-d.marginTop,right:c.right-b.right-d.marginRight,bottom:c.bottom-b.bottom-d.marginBottom};return e},q.prototype.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},q.prototype.bindResize=function(){this.isResizeBound||(c.bind(a,"resize",this),this.isResizeBound=!0)},q.prototype.unbindResize=function(){this.isResizeBound&&c.unbind(a,"resize",this),this.isResizeBound=!1},q.prototype.onresize=function(){function a(){b.resize(),delete b.resizeTimeout}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var b=this;this.resizeTimeout=setTimeout(a,100)},q.prototype.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},q.prototype.needsResizeLayout=function(){var a=n(this.element),b=this.size&&a;return b&&a.innerWidth!==this.size.innerWidth},q.prototype.addItems=function(a){var b=this._itemize(a);return b.length&&(this.items=this.items.concat(b)),b},q.prototype.appended=function(a){var b=this.addItems(a);b.length&&(this.layoutItems(b,!0),this.reveal(b))},q.prototype.prepended=function(a){var b=this._itemize(a);if(b.length){var c=this.items.slice(0);this.items=b.concat(c),this._resetLayout(),this._manageStamps(),this.layoutItems(b,!0),this.reveal(b),this.layoutItems(c)}},q.prototype.reveal=function(a){var b=a&&a.length;if(b)for(var c=0;b>c;c++){var d=a[c];d.reveal()}},q.prototype.hide=function(a){var b=a&&a.length;if(b)for(var c=0;b>c;c++){var d=a[c];d.hide()}},q.prototype.getItem=function(a){for(var b=0,c=this.items.length;c>b;b++){var d=this.items[b];if(d.element===a)return d}},q.prototype.getItems=function(a){if(a&&a.length){for(var b=[],c=0,d=a.length;d>c;c++){var e=a[c],f=this.getItem(e);f&&b.push(f)}return b}},q.prototype.remove=function(a){a=d(a);var b=this.getItems(a);if(b&&b.length){this._itemsOn(b,"remove",function(){this.emitEvent("removeComplete",[this,b])});for(var c=0,f=b.length;f>c;c++){var g=b[c];g.remove(),e(g,this.items)}}},q.prototype.destroy=function(){var a=this.element.style;a.height="",a.position="",a.width="";for(var b=0,c=this.items.length;c>b;b++){var d=this.items[b];d.destroy()}this.unbindResize();var e=this.element.outlayerGUID;delete s[e],delete this.element.outlayerGUID,j&&j.removeData(this.element,this.constructor.namespace)},q.data=function(a){var b=a&&a.outlayerGUID;return b&&s[b]},q.create=function(a,c){function d(){q.apply(this,arguments)}return Object.create?d.prototype=Object.create(q.prototype):b(d.prototype,q.prototype),d.prototype.constructor=d,d.defaults=b({},q.defaults),b(d.defaults,c),d.prototype.settings={},d.namespace=a,d.data=q.data,d.Item=function(){p.apply(this,arguments)},d.Item.prototype=new p,g(function(){for(var b=f(a),c=h.querySelectorAll(".js-"+b),e="data-"+b+"-options",g=0,k=c.length;k>g;g++){var l,m=c[g],n=m.getAttribute(e);try{l=n&&JSON.parse(n)}catch(o){i&&i.error("Error parsing "+e+" on "+m.nodeName.toLowerCase()+(m.id?"#"+m.id:"")+": "+o);continue}var p=new d(m,l);j&&j.data(m,a,p)}}),j&&j.bridget&&j.bridget(a,d),d},q.Item=p,q}var h=a.document,i=a.console,j=a.jQuery,k=function(){},l=Object.prototype.toString,m="function"==typeof HTMLElement||"object"==typeof HTMLElement?function(a){return a instanceof HTMLElement}:function(a){return a&&"object"==typeof a&&1===a.nodeType&&"string"==typeof a.nodeName},n=Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1};"function"==typeof define&&define.amd?define("outlayer/outlayer",["eventie/eventie","doc-ready/doc-ready","eventEmitter/EventEmitter","get-size/get-size","matches-selector/matches-selector","./item"],g):"object"==typeof exports?module.exports=g(require("eventie"),require("doc-ready"),require("wolfy87-eventemitter"),require("get-size"),require("desandro-matches-selector"),require("./item")):a.Outlayer=g(a.eventie,a.docReady,a.EventEmitter,a.getSize,a.matchesSelector,a.Outlayer.Item)}(window),function(a){function b(a,b){var d=a.create("masonry");return d.prototype._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns();var a=this.cols;for(this.colYs=[];a--;)this.colYs.push(0);this.maxY=0},d.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var a=this.items[0],c=a&&a.element;this.columnWidth=c&&b(c).outerWidth||this.containerWidth}this.columnWidth+=this.gutter,this.cols=Math.floor((this.containerWidth+this.gutter)/this.columnWidth),this.cols=Math.max(this.cols,1)},d.prototype.getContainerWidth=function(){var a=this.options.isFitWidth?this.element.parentNode:this.element,c=b(a);this.containerWidth=c&&c.innerWidth},d.prototype._getItemLayoutPosition=function(a){a.getSize();var b=a.size.outerWidth%this.columnWidth,d=b&&1>b?"round":"ceil",e=Math[d](a.size.outerWidth/this.columnWidth);e=Math.min(e,this.cols);for(var f=this._getColGroup(e),g=Math.min.apply(Math,f),h=c(f,g),i={x:this.columnWidth*h,y:g},j=g+a.size.outerHeight,k=this.cols+1-f.length,l=0;k>l;l++)this.colYs[h+l]=j;return i},d.prototype._getColGroup=function(a){if(2>a)return this.colYs;for(var b=[],c=this.cols+1-a,d=0;c>d;d++){var e=this.colYs.slice(d,d+a);b[d]=Math.max.apply(Math,e)}return b},d.prototype._manageStamp=function(a){var c=b(a),d=this._getElementOffset(a),e=this.options.isOriginLeft?d.left:d.right,f=e+c.outerWidth,g=Math.floor(e/this.columnWidth);g=Math.max(0,g);var h=Math.floor(f/this.columnWidth);h-=f%this.columnWidth?0:1,h=Math.min(this.cols-1,h);for(var i=(this.options.isOriginTop?d.top:d.bottom)+c.outerHeight,j=g;h>=j;j++)this.colYs[j]=Math.max(i,this.colYs[j])},d.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var a={height:this.maxY};return this.options.isFitWidth&&(a.width=this._getContainerFitWidth()),a},d.prototype._getContainerFitWidth=function(){for(var a=0,b=this.cols;--b&&0===this.colYs[b];)a++;return(this.cols-a)*this.columnWidth-this.gutter},d.prototype.needsResizeLayout=function(){var a=this.containerWidth;return this.getContainerWidth(),a!==this.containerWidth},d}var c=Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){for(var c=0,d=a.length;d>c;c++){var e=a[c];if(e===b)return c}return-1};"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size"],b):"object"==typeof exports?module.exports=b(require("outlayer"),require("get-size")):a.Masonry=b(a.Outlayer,a.getSize)}(window),PreLoadImages.prototype.init=function(){var a,b;a=[],b=this.value,window.onload=function(){for(var c=0;c<b.length;c++)a[c]=new Image,a[c].src=b[c]}},ServerRequest.prototype.getRequest=function(a){var b=this;$.ajax({url:a,type:"GET",username:"WebAPIPhotocreateUser",password:"@dvw3b@piu$3r",success:function(a){b.callback(a)}})},ServerRequest.prototype.postRequest=function(a,b){var c=this;$.ajax({url:a,type:"POST",username:"WebAPIPhotocreateUser",password:"@dvw3b@piu$3r",data:b,success:function(a){c.callback(a)}})},ServerRequest.prototype.putRequest=function(a,b){var c=this;$.ajax({url:a,type:"PUT",username:"WebAPIPhotocreateUser",password:"@dvw3b@piu$3r",data:b,success:function(a){c.callback(a)}})},ServerRequest.prototype.init=function(){switch(this.type){case"GET":this.getRequest(this.url);break;case"POST":this.postRequest(this.url,this.data);break;case"PUT":this.putRequest(this.url,this.data)}},SaveCanvas.prototype.undo=function(){el=this.el,$(el.buttonUndo).on("click",function(){$(el.loadingCanvas).css("display","block");new CanvasSetup("revert",function(){insertJSON=new InsertJSON("standard",function(){$(el.loadingCanvas).fadeOut(800),cropMarks&&(cropMarksInit=new CanvasGrid("cropMarks"))})})})},SaveCanvas.prototype.updateJson=function(){$.each(pages,function(){this.json=JSON.stringify(this.fabric),this.jsonObj=JSON.parse(this.json.replace(',"background":"#fff"}',"").replace('{"objects":',"").replace(";",""))})},SaveCanvas.prototype.init=function(){this.el={buttonUndo:"#revert",loadingCanvas:"#canvas-loader"},this.undo(),setInterval(this.updateJson,8e3)},PageStyle.prototype.colourSetUp=function(a){var b=this.el;$(b.primaryColour).css("background-color",a.prm),$(b.secondaryColor).css("background-color",a.sec),$(b.primaryLight).css("background-color",a.lt),$(b.button).css("background-color",a.op),$(b.buttonOrange).css("background-color",a.lt)},PageStyle.prototype.setUpSchool=function(){var a=this,b=this.el;$(b.header).addClass("pattern"),$(b.headerLogo).attr("src","assets/svg/logo-org.svg"),$.each(this.colours,function(){this.name==a.style&&a.colourSetUp(this)})},PageStyle.prototype.setUpSports=function(){var a=this.el;$(a.header).removeClass("pattern").addClass("pattern_sports"),$(a.body).css("background-image","url(assets/img/sports/bg_crowd.jpg)")},PageStyle.prototype.setUpFamilies=function(){},PageStyle.prototype.checkPage=function(){switch(this.el={header:"header",headerLogo:"#header_logo",body:"body",primaryColour:".prm",secondaryColor:".sec",primaryLight:".prm_lt",button:".button",buttonOrange:".btn-orange",selectQty:".productQty",changeOrientation:"#orientationLinks"},this.website){case"advancedyou-school":case"advancedyou-sports":case"advancedyou-family":this.setUpSchool(),$(this.el.changeOrientation).addClass("hidden")}console.log("pages type: ",this.type),"editCartItem"==this.type&&$(this.el.selectQty).addClass("hidden")},ImageUploader.prototype.loadImages=function(){var a=this;$.ajax({url:"http://192.168.0.216/AdvAPI/api/UploadFile/"+a.userId+"/List/",username:"WebAPIPhotocreateUser",password:"@dvw3b@piu$3r",type:"GET",success:function(b){var c=[];$.each(b,function(b){var d;1==this.thumbnailMade?(d=this.thumbnailPath,console.log("check thumb: ",d)):d=this.webServerPath,c.push({HighRes:"http://192.168.0.216"+this.webServerPath,Path:"http://192.168.0.216"+d,ID:a.userId,Name:a.userName})});new ListBuilder("uploadedImages",c,!0);a.callback()}}).fail(function(){a.callback()})},ImageUploader.prototype.init=function(){var a,b;a=this,b=this.defaults,this.loadImages(),$(b.button).bind("click",function(){$(b.file).click()}),$(b.file).change(function(){$(b.display).val($(b.file).val().substring(12,$(b.file).val().length))}),$(b.trigger).on("click",function(){var c=new FormData,d=$(b.file).get(0).files;d.length>0&&c.append("ImageUploaded",d[0]),$.ajax({type:"POST",url:"http://192.168.0.216/AdvAPI/api/UploadFile/Guests/"+a.userId+"/",username:"WebAPIPhotocreateUser",password:"@dvw3b@piu$3r",contentType:!1,processData:!1,data:c,success:function(){location.reload()}})})},ImageUploader.prototype.loadDefaults=function(){this.defualts||(this.defaults={wrap:"#wrap-upload",file:"#upload-file",button:"#upload-button",display:"#upload-display",trigger:"#upload-init",imageList:"#uploadedImages"}),this.init()},Pagnation.prototype.setCurrentPage=function(a){0==$(a).attr("data-yposition")&&(currentPageRef=$(a).attr("id").replace("wrap-canvas-",""),console.log(currentPageRef))},Pagnation.prototype.pageUp=function(a){var b,c;c=this,b=$("#nav-page-0").parent().attr("class"),"selected"!=b&&($("#"+this.wrap+" .selected").removeClass("selected").prev("li").addClass("selected"),$(".wrap-canvas").each(function(){var a=$(this).attr("data-yposition");$(this).attr("data-yposition",parseInt(a)+100),$(this).css("top",parseInt(a)+100+"%")}))},Pagnation.prototype.pageDown=function(a){var b,c;c=this,b=$("#nav-page-"+(this.pages.length-1)).parent().attr("class"),"selected"!=b&&($("#"+this.wrap+" .selected").removeClass("selected").next("li").addClass("selected"),$(".wrap-canvas").each(function(){var a=$(this).attr("data-yposition");$(this).attr("data-yposition",parseInt(a)-100),$(this).css("top",parseInt(a)-100+"%"),c.setCurrentPage(this)}))},Pagnation.prototype.movePages=function(a){var b,c,d,e;e=this,$("#"+this.wrap+" li").removeClass("selected"),$(a).parent().addClass("selected"),b=$(a).attr("id").replace("nav-page-",""),c=$("#wrap-canvas-"+b).attr("data-yposition"),d=0-c,$(".wrap-canvas").each(function(){var a=$(this).attr("data-yposition");$(this).attr("data-yposition",parseInt(a)-c),$(this).css("top",parseInt(a)-c+"%"),e.setCurrentPage(this)})},Pagnation.prototype.eventManager=function(){var a=this;$("#"+this.wrap).on("click","a",function(){var b=$(this).attr("id");"nav-page-up"==b?a.pageUp(this):"nav-page-down"==b?a.pageDown(this):a.movePages(this)})},Pagnation.prototype.init=function(){var a;a=this,$(".wrap-canvas").each(function(){a.pages.push({id:$(this).attr("id"),yPosition:$(this).attr("data-yposition")})}),$("#nav-pages").removeClass("hidden"),$("#nav-page-0").parent().addClass("selected"),this.eventManager()},ListBuilder.prototype.addMasonary=function(){var a=document.getElementById(this.wrap);$("#"+this.wrap+" img").load(function(){new Masonry(a,{columnWidth:3,itemSelector:".img-col-50"})})},ListBuilder.prototype.init=function(){for(var a=0;a<this.obj.length;a++){var b,c,d,e;b=document.getElementById(this.wrap),c=document.createElement("li"),d=document.createElement("a"),e=document.createElement("img"),$(c).append(d),$(d).append(e),$(b).append(c),$(e).attr({src:this.obj[a].Path,alt:this.obj[a].Name}),$(d).attr({"data-id":this.obj[a].ID,"data-lookUp":a}),this.masonaryGrid&&$(c).addClass("img-col-50")}console.log("show callback value:",this.callback),this.callback&&this.callback(),this.masonaryGrid&&this.addMasonary()},LayoutManager.prototype.listener=function(){var _this,string;_this=this,$("#listThemes").on("click","a",function(event){event.preventDefault(),string=_this.obj.Themes[$(this).attr("data-lookUp")].JSON,_this.themeParseString(eval(string.replace('{"objects":',"").replace(',"background":"#fff"}',"")))})},LayoutManager.prototype.themeParseString=function(a){var b;b=this,this.__this.resetPage(function(){setTimeout(function(){a[0].width>a[0].height&&(b.__this.buildLandscape(),b.buildTheme(a)),a[0].width<a[0].height&&(b.__this.buildPortrait(),b.buildTheme(a))},400)})},LayoutManager.prototype.buildTheme=function(a){var b,c,d;b=this,c=canvas._objects[0].width/a[0].width;for(var e=0;e<a.length;e++){switch(a[e].width=a[e].width*c,a[e].height=a[e].height*c,a[e].left=a[e].left*c,a[e].top=a[e].top*c,a[e].type){case"i-text":a[e].fontSize=a[e].fontSize*c;break;case"circle":a[e].radius=a[e].radius*c}a[0].selectable=!1}d='{"objects":'+JSON.stringify(a)+',"background":"#fff"}',canvas.loadFromJSON(d),canvas.renderAll()},LayoutManager.prototype.init=function(){this.listener()},ElementBuilder.prototype.canvasWrap=function(){for(var a=0,b=0;b<this.obj.length;b++){var c,d;c=document.getElementById(this.wrap),d=$(document.getElementById(this.template)).clone(),$(d).attr({id:"wrap-canvas-"+b,"data-yPosition":a}).css("top",a+"%"),$(d).find("canvas").attr({id:"canvas-"+b}),$(c).append(d),a+=100}$("#"+this.type.template).remove(),this.callback&&this.callback()},ElementBuilder.prototype.buildList=function(a,b){var c,d,e,f;c=document.getElementById(this.wrap),d=document.createElement("li"),e=document.createElement("a"),f=document.createElement("p"),$(e).attr("id",a),$(f).html(b),$(e).append(f),$(d).append(e),$(c).append(d)},ElementBuilder.prototype.pageNav=function(){this.buildList("nav-page-up",'<span class="icon-arrow-up"></span>');for(var a=0;a<this.obj.length;a++)this.buildList(this.label+a,parseInt(a)+1);this.buildList("nav-page-down",'<span class="icon-arrow-down2"></span>'),this.callback()},ElementBuilder.prototype.init=function(){switch(this.type.name){case"canvasWrap":this.template=this.type.template,this.wrap=this.type.wrap,this.canvasWrap();break;case"canvasPagnation":this.wrap=this.type.wrap,this.label=this.type.label,this.pageNav()}},ScrollManager.prototype.updatePositions=function(a){var b,c,d;b=this.wrap.scrollTop(),this.children.each(function(){c=$(this).attr("id"),c&&(d=c.slice(0,6),"assets"==d&&a.positions.push({name:c,offset:$(this).offset().top-a.wrap.offset().top+b,height:$(this).height()}))})},ScrollManager.prototype.addSelected=function(a,b,c){$(b).removeClass(c),$(a).addClass(c)},ScrollManager.prototype.manageScroll=function(a){var b,c,d;d=this,this.updatePositions(d),b="#assets"+$(a).attr("data-link");for(var e=0;e<this.positions.length;e++)b.replace("#","")==this.positions[e].name&&(c=this.positions[e].offset);this.wrap.animate({scrollTop:c-20}).slimScroll({scrollTo:c+"px"})},ScrollManager.prototype.userInput=function(){var a=this;$("#tabs").on("click","a",function(){a.manageScroll(this),a.addSelected($(this).parent("li"),"#tabs li","selected")}),$("#shortcutTabs").on("click","a",function(){a.manageScroll(this)}),$(".quickLinks").on("click","a",function(){a.manageScroll(this)})},ScrollManager.prototype.arrowControls=function(){setTimeout(function(){$(".quickLinks a").addClass("bounce"),setTimeout(function(){$(".quickLinks a").removeClass("bounce")},1e3)},1e3),$(".quickLinks, #tabs").on("click","a",function(){setTimeout(function(){$(".quickLinks a").addClass("bounce"),setTimeout(function(){$(".quickLinks a").removeClass("bounce")},1e3)},1e3)}),$(".quickLinks").on("mouseenter","a",function(){$(this).removeClass("bounce")})},ScrollManager.prototype.init=function(){var a=this;this.children.css("min-height",window.innerHeight-$("header").height()+"px"),this.updatePositions(a),this.wrap.slimscroll(),this.userInput(),this.arrowControls()},RotateCanvas.prototype.makePortrait=function(){console.log("Width: ",pages[currentPageRef].jsonObj[0].width,"height: ",pages[currentPageRef].jsonObj[0].height),pages[currentPageRef].jsonObj[0].width=pages[currentPageRef].portrait.width,pages[currentPageRef].jsonObj[0].height=pages[currentPageRef].portrait.height},RotateCanvas.prototype.makeLandscape=function(){console.log("Width: ",pages[currentPageRef].jsonObj[0].width,"height: ",pages[currentPageRef].jsonObj[0].height),pages[currentPageRef].jsonObj[0].width=pages[currentPageRef].portrait.width,pages[currentPageRef].jsonObj[0].height=pages[currentPageRef].portrait.height},RotateCanvas.prototype.init=function(){var a,b;b=this,console.log("click"),$("#orientationLinks").on("click","a",function(){a=$(this).attr("id"),console.log("click"),a!=pages[currentPageRef].orientation&&("landscape"==pages[currentPageRef].orientation?(pages[currentPageRef].orientation="portrait",b.makePortrait()):(pages[currentPageRef].orientation="landscape",b.makeLandscape(),console.log("Width: ",pages[currentPageRef].jsonObj[0].width,"height: ",pages[currentPageRef].jsonObj[0].height)),b.callback())})},Palette.prototype.paletteCreateColours=function(){var colours;colours=eval(this.colours);for(var i=0;i<colours.length;i++){var wrap,block;wrap=document.createElement("li"),block=document.createElement("a"),$(wrap).attr("id",colours[i]).css("width","50%"),
$(block).css("background","rgb"+colours[i]),0==i&&$(wrap).addClass("selected"),$(wrap).append(block),$("#colourContainer").append(wrap)}},Palette.prototype.paletteControllers=function(){var a,a=this;$("#trash").on("click",function(){pages[currentPageRef].fabric.remove(a.activeObj),a.hideSubMenus(),pages[currentPageRef].fabric.renderAll()}),$("#grow").on("click",function(){a.activeObj&&(a.activeObj.height=1.06*a.activeObj.height,a.activeObj.width=1.06*a.activeObj.width,pages[currentPageRef].fabric.renderAll())}),$("#shrink").on("click",function(){a.activeObj&&(a.activeObj.height=.94*a.activeObj.height,a.activeObj.width=.94*a.activeObj.width,pages[currentPageRef].fabric.renderAll())}),$("#back").on("click",function(){pages[currentPageRef].fabric.sendBackwards(a.activeObj),a.activeObj==pages[currentPageRef].fabric.item(0)&&pages[currentPageRef].fabric.bringForward(a.activeObj)}),$("#forward").on("click",function(){a.activeObj&&pages[currentPageRef].fabric.bringForward(a.activeObj)}),$("#palette li a").on("click",function(){var a;a=$(this).next("ul"),a.toggle()}),$("#opacity").on("change",function(){a.activeObj&&(a.activeObj.opacity=.01*$(this).val(),pages[currentPageRef].fabric.renderAll())}),$("#greyscale").on("click",function(){var b,c;b=new fabric.Image.filters.Grayscale,c=!0,a.activeObj.filters.push(new fabric.Image.filters.Grayscale),a.activeObj.applyFilters(pages[currentPageRef].fabric.renderAll.bind(pages[currentPageRef].fabric)),pages[currentPageRef].fabric.renderAll()}),$("#imageColour").on("click",function(){var b,c;b=new fabric.Image.filters.Grayscale,c=!0,a.activeObj.filters=[],a.activeObj.applyFilters(),pages[currentPageRef].fabric.renderAll()}),$("#colourContainer").on("click","li",function(){var b="rgb"+$(this).attr("id");a.activeObj.fill=b,pages[currentPageRef].fabric.renderAll()}),$("#alignLeft").on("click",function(){a.activeObj.textAlign="left",pages[currentPageRef].fabric.renderAll()}),$("#alignCenter").on("click",function(){a.activeObj.textAlign="center",pages[currentPageRef].fabric.renderAll()}),$("#alignRight").on("click",function(){a.activeObj.textAlign="right",pages[currentPageRef].fabric.renderAll()}),$("#fontSize").on("change",function(){if(a.activeObj){a.activeObj.fontSize;a.activeObj.fontSize=$(this).val(),pages[currentPageRef].fabric.renderAll()}}),$("#lineHeight").on("change",function(){a.activeObj&&(a.activeObj.lineHeight=$(this).val(),pages[currentPageRef].fabric.renderAll())}),$("#fontFamily").on("change",function(){a.activeObj&&(a.activeObj.fontFamily=$(this).val(),pages[currentPageRef].fabric.renderAll())})},Palette.prototype.isRealValue=function(a){return a&&"null"!==a&&"undefined"!==a},Palette.prototype.initPalette=function(a){var b;switch(b=this,a){case"image":b.paletteType("image"),b.show();break;case"i-text":b.paletteType("i-text"),b.show();break;case"rect":b.paletteType("solid"),b.show();break;case"solid":b.paletteType("solid"),b.show();break;case"circle":b.paletteType("solid"),b.show();break;case"triangle":b.paletteType("solid"),b.show();break;case"":b.hide(),b.activeObj=!1}},Palette.prototype.show=function(){$("#palette").removeClass("hide-scale")},Palette.prototype.hide=function(){$("#palette").addClass("hide-scale")},Palette.prototype.modified=function(){var a=this;pages[currentPageRef].fabric.on("object:selected",function(b){a.activeObj=b.target,pages[currentPageRef].fabric.renderAll(),a.hideSubMenus(),a.initPalette(a.activeObj.get("type"))}),pages[currentPageRef].fabric.on("object:added",function(b){a.activeObj=b.target,pages[currentPageRef].fabric.renderAll(),a.initPalette(a.activeObj.get("type"))}),pages[currentPageRef].fabric.on("object:modified",function(b){a.activeObj=b.target,a.hideSubMenus()}),pages[currentPageRef].fabric.on("object:moving",function(b){a.hideSubMenus()}),pages[currentPageRef].fabric.on("object:removed",function(b){a.activeObj=!1,a.hide()}),pages[currentPageRef].fabric.on("selection:cleared",function(b){a.activeObj=!1,a.hide()}),pages[currentPageRef].fabric.on("selection:created",function(b){a.activeObj=b.target,a.initPalette(a.activeObj.get("type")),a.show()})},Palette.prototype.syncTextControls=function(){console.log("Show active object: ",this.activeObj);var a,b,c;a=this.activeObj.fontSize,b=this.activeObj.fontFamily,c=this.activeObj.lineHeight,$("#fontSize").val(a),$("#fontFamily").val(b),$("#lineHeight").val(c)},Palette.prototype.hideSubMenus=function(){$("#palette li ul").css("display","none")},Palette.prototype.paletteType=function(a){var b,c,d,e,f;switch(_this=this,b=$("#palette"),c=$("#palette li a"),childrenChildren=$("#palette li ul li"),d=["textStyle","colourPalette","back","forward","trash"],e=["filter","back","forward","grow","shrink","trash"],f=["filter","colourPalette","back","forward","grow","shrink","trash"],a){case"i-text":c.parent().addClass("hide-item"),childrenChildren.removeClass("hide-item");for(var g=0;g<d.length;g++){var h=document.getElementById(d[g]);$(h).parent().removeClass("hide-item")}_this.syncTextControls();break;case"image":c.parent().addClass("hide-item"),childrenChildren.removeClass("hide-item");for(var g=0;g<e.length;g++){var h=document.getElementById(e[g]);$(h).parent().removeClass("hide-item")}break;case"solid":c.parent().addClass("hide-item"),childrenChildren.removeClass("hide-item");for(var g=0;g<f.length;g++){var h=document.getElementById(f[g]);$(h).parent().removeClass("hide-item")}}},Palette.prototype.initKeyboard=function(){var a=this,b=function(b,c){var d=a.activeObj;if(!d)return!0;switch(b){case"zoomBy-x":d.zoomBy(c,0,0,function(){pages[currentPageRef].fabric.renderAll()});break;case"zoomBy-y":d.zoomBy(0,c,0,function(){pages[currentPageRef].fabric.renderAll()});break;case"zoomBy-z":d.zoomBy(0,0,c,function(){pages[currentPageRef].fabric.renderAll()});break;default:d.set(b,d.get(b)+c)}return("left"===b||"top"===b)&&d.setCoords(),pages[currentPageRef].fabric.renderAll(),!1};document.onkeydown=function(c){var d=window.event?window.event.keyCode:c.keyCode;switch(d){case 37:return c.shiftKey?b("zoomBy-x",-1):c.ctrlKey||c.metaKey?b("angle",-1):b("left",-1);case 39:return c.shiftKey?b("zoomBy-x",1):c.ctrlKey||c.metaKey?b("angle",1):b("left",1);case 38:return c.shiftKey?b("zoomBy-y",-1):c.ctrlKey||c.metaKey?!0:b("top",-1);case 40:return c.shiftKey?b("zoomBy-y",1):c.ctrlKey||c.metaKey?!0:b("top",1);case 46:var e=pages[currentPageRef].fabric.getActiveObject();return pages[currentPageRef].fabric.remove(e),a.hideSubMenus(),!0}}},Palette.prototype.init=function(){this.hide(),this.paletteCreateColours(),this.hideSubMenus(),this.paletteControllers(),this.initKeyboard(),this.modified(),setTimeout(function(){$("#palette").addClass("hide-scale").removeClass("hidden"),pages[currentPageRef].fabric.renderAll()},1e3)},ExportJson.prototype.linkToLayoutManager=function(){return"?userId="+this.userId+"&userName="+this.userName},ExportJson.prototype.backLink=function(){var a;a=this,$(".back").on("click",function(){if("layoutBuilder"==a.website){var b=a.linkToLayoutManager();$(this).attr("href","../layoutManager/layouts.html"+b)}("advancedyou-school"==a.website||"advancedyou-family"==a.website||"advancedyou-sports"==a.website)&&($("#screenChange").removeClass("hidden"),$(this).attr("href","../subjectPortal/gift_items.aspx?SIC="+a.id1+"&userId="+a.userId))})},ExportJson.prototype.zeroFill=function(a,b){return b-=a.toString().length,b>0?new Array(b+(/\./.test(a)?2:1)).join("0")+a:a+""},ExportJson.prototype.updateJson=function(){$.each(pages,function(){this.json=JSON.stringify(this.fabric)})},ExportJson.prototype.newWebLayoutObj=function(){return newWebLayout={productID:productData.id,deleted:!1,dateModified:todaysDate,lastEditedBy:this.userName,rank:1,numberOfPages:pages.length}},ExportJson.prototype.newWebJsonObj=function(a){var b,c,d;return b=this,d=[],$.each(pages,function(e,f){c=b.zeroFill(e+1,5),d.push({webLayoutID:a,jsonID:this.jsonId,fromWhere:b.website,json:this.json,dateModified:todaysDate,pageNumber:c})}),d},ExportJson.prototype.pushWebJsons=function(a,b,c){var d;d=this,$.each(a,function(){new ServerRequest("http://192.168.0.216/AdvAPI/api/WJValues","POST",this,function(a){console.log("Success, the layout and JSON table have successfully been updated: ",a),c()})})},ExportJson.prototype.updateWebJsonObj=function(){var a,b,c;return a=this,c=[],$.each(pages,function(d,e){b=a.zeroFill(d+1,5),c.push({webLayoutID:layoutData.id,jsonID:this.jsonId,fromWhere:a.website,json:this.json,dateModified:todaysDate,pageNumber:b})}),c},ExportJson.prototype.updateWebJsons=function(a,b,c){var d;d=this,$.each(a,function(){new ServerRequest("http://192.168.0.216/AdvAPI/api/WJValues/"+this.jsonID,"PUT",this,function(a){c()})})},ExportJson.prototype.createNew=function(){var a=this;$("header, aside").on("click",".export",function(){var b,c;a.updateJson(),b=a.newWebLayoutObj();new ServerRequest("http://192.168.0.216/AdvAPI/api/WLValues","POST",b,function(b){console.log("this is the layout id: ",b.layoutID),c=a.newWebJsonObj(b.layoutID),a.pushWebJsons(c,"POST",function(){location="http://192.168.0.216/layoutManager/layouts.html"+a.linkToLayoutManager()})})})},ExportJson.prototype.save=function(){var a=this;$("header, aside").on("click",".export",function(){var b;$("#screenChange").removeClass("hidden"),a.updateJson(),b=a.newWebLayoutObj();new ServerRequest("http://192.168.0.216/AdvAPI/api/WLValues/"+layoutData.id,"PUT",b,function(b){webJsons=a.updateWebJsonObj(),a.updateWebJsons(webJsons,"PUT",function(){setTimeout(function(){$("#screenChange").addClass("hidden")},800),console.log("Web jsons saved")})})})},ExportJson.prototype.postToCart=function(a,b,c){var d,e,f,g,h;e=b?"~/CreateJS/JSON/"+c+".jpg":"~/canvas/"+$(".productImage").attr("src"),OriginURL=window.location.href.replace("http://192.168.0.216","").replace(/&/g,"_").replace("cartItem","editCartItem"),f=OriginURL.slice(OriginURL.search("jsonId="),OriginURL.search("_end")),OriginURL=OriginURL.replace(f,"jsonId="+a),"you"==this.website&&(SICCode=this.id1,h=""),"community"==this.website&&(SICCode="",h=this.id1),g=$(".price").html().replace("$","").replace(/\s/g,""),d="WebClientAssetId=4239&ProductId="+productData.id+"&ImageUrl="+e+"&ProductDescription="+$(".description").html()+"&ProductName="+$(".itemName").html()+"&Price="+g+"&Quantity="+$("#qty").val()+"&DiscountAmount=0&TotalAmount="+g*$("#qty").val()+"&WebDataItem=OrderType=Photocreate_ProductID="+productData.id+"_JSONID="+a+"&SICCode="+this.id1+"&WebClientID=&PortalName=[advancedyou-school]&OriginURL="+OriginURL,window.location="http://192.168.0.216/cartLink.aspx?"+d},ExportJson.prototype.cartItem=function(){var a,b,c,d;a=this,console.log("cart item."),$("header, aside").on("click",".export",function(){$("#screenChange").removeClass("hidden"),a.updateJson(),c=pages.length-1,$.each(pages,function(e,f){var e=e;d=a.zeroFill(e+1,5);var g={fromWhere:a.website,json:this.json,webOrderItemID:a.productId,user:a.userId,dateModified:todaysDate,pageNumber:d};new ServerRequest("http://192.168.0.216/AdvAPI/api/WJValues","POST",g,function(d){function f(){setTimeout(function(){g()},1500)}function g(){i++;new ServerRequest("http://192.168.0.216/AdvAPI/api/WJValues/thumbnailMade/"+h,"GET",null,function(c){console.log("check thumb: ",c.thumbnailMade),1==c.thumbnailMade?a.postToCart(b,c.thumbnailMade,h):i>10?a.postToCart(b,c.thumbnailMade,h):(console.log("thumb not made"),f())})}var h;if("undefined"==typeof b?(h=d.jsonID,b=d.jsonID):b=b+"_"+d.jsonID,console.log("this is an index: ",e,"this is the items: ",c),e==c){var i=0;f()}})})})},ExportJson.prototype.editCartItem=function(){var a,b,c;a=this,$("header, aside").on("click",".export",function(){$("#screenChange").removeClass("hidden"),a.updateJson(),b=pages.length-1,c=pages[0].jsonId,$.each(pages,function(d,e){var f={isChanged:!0,isDeleted:!1,jsonID:this.jsonId,fromWhere:a.website,json:this.json,dateModified:todaysDate,webOrderItemID:productData.id,userID:a.userId,pageNumber:this.id};console.log("Date for updating json strings: ",f,"current json ids: ",this.jsonId);new ServerRequest("http://192.168.0.216/AdvAPI/api/WJValues/"+this.jsonId,"PUT",f,function(e){function f(){setTimeout(function(){g()},1500)}function g(){h++;new ServerRequest("http://192.168.0.216/AdvAPI/api/WJValues/thumbnailMade/"+c,"GET",null,function(b){console.log("is thumbnail made: ",b),1==b.thumbnailMade?location="http://192.168.0.216/subjectPortal/cart.aspx?SIC="+a.id1+"&userId="+a.userId:h>10?location="http://192.168.0.216/subjectPortal/cart.aspx?SIC="+a.id1+"&userId="+a.userId:f()})}if(d==b){var h=0;f()}})})})},ExportJson.prototype.init=function(){switch(this.backLink(),this.website){case"layoutBuilder":$(".productQty").css("display","none"),"copy"==this.type?($(".export").html('ADD LAYOUT <span class="icon-smiley m_m_left txt-fff"></span>'),this.createNew()):($(".export").html('SAVE LAYOUT <span class="icon-smiley m_m_left txt-fff"></span>'),this.save());break;case"advancedyou-school":case"advancedyou-sports":case"advancedyou-family":"cartItem"==this.type?this.cartItem():this.editCartItem();break;case"community":this.cartItem();break;case"client":this.cartItem()}},AddImages.prototype.deactivateAll=function(a,b){$.each(pages,function(){this.fabric.deactivateAll().renderAll()}),b()},AddImages.prototype.addImage=function(a,b,c,d,e){this.deactivateAll("addImage",function(){fabric.Image.fromURL(a,function(a){a.originX="center",a.originY="center",a.left=d,a.top=e,a.width=b,a.height=c,a.active=!0,pages[currentPageRef].fabric.add(a)})})},AddImages.prototype.clickAdd=function(){var a=this;$("#listImages, #uploadedImages, #stockImages").on("click","a",function(){var b,c,d;b=$(this).find("img").width(),c=$(this).find("img").height(),d=$(this).attr("data-lookup"),a.addImage($(this).find("img").attr("src"),b,c,$("canvas").width()/2,$("canvas").height()/2)})},AddImages.prototype.dropAndDragStart=function(){var a,b,c,d,e,f,g,h,i;g=window.pageXOffset,h=window.pageYOffset,i=this,$("#listImages a img, #uploadedImages li a img, #stockImages a img").draggable({appendTo:"body",obj:this,helper:function(a,b){return c=$(this).width(),d=$(this).height(),f=$(this).clone(),f.css({width:c+"px",height:d+"px","z-index":"2000"}),f},start:function(a,b){$(this).css("opacity","0"),e=$(this).parents().eq(1).offset(),relativeMouseStart={left:a.pageX-e.left,top:a.pageY-e.top}},stop:function(e,g){$(this).css("opacity","1"),f.remove();$(this).parent().attr("data-lookup");a=e.pageX,b=e.pageY,a>$("#canvas-"+currentPageRef).offset().left&&a<$("#canvas-"+currentPageRef).offset().left+$("#canvas-"+currentPageRef).width()&&b>$("#canvas-"+currentPageRef).offset().top&&b<$("#canvas-"+currentPageRef).offset().top+$("#canvas-"+currentPageRef).height()&&i.addImage($(this).attr("src"),c,d,a-$("#canvas-"+currentPageRef).offset().left-relativeMouseStart.left+c/2,b-$("#canvas-"+currentPageRef).offset().top-relativeMouseStart.top+d/2)},revert:!0,revertDuration:0,scroll:!1})},AddImages.prototype.init=function(){"update"==this.type?this.dropAndDragStart():(this.clickAdd(),this.dropAndDragStart())},AddTextItems.prototype.deactivateAll=function(a,b){$.each(pages,function(){this.fabric.deactivateAll().renderAll()}),b()},AddTextItems.prototype.addIText=function(a,b,c){this.deactivateAll("addIText",function(){var d=new fabric.IText(a,{fontFamily:b[c].style,originX:"center",originY:"center",left:$("#canvas-"+currentPageRef).width()/2,top:$("#canvas-"+currentPageRef).height()/2,fill:b[c].fill,fontSize:1.2*b[c].size,lineHeight:1.2*b[c].lineHeight,scaleX:1,scaleY:1,active:!0});pages[currentPageRef].fabric.add(d),$("#fontFamily").val(d.fontFamily),pages[currentPageRef].fabric.renderAll()})},AddTextItems.prototype.assetsThemes=function(){var a;return a=this,""==this.themes?void $(".themesObj, #assetsThemes").css("display","none"):void 0},AddTextItems.prototype.buildTextHTML=function(a,b,c){$(a).css("height",$(a).outerHeight()+"px"),$(a).empty(),"dark"==b[0].background?$(a).parent("div").css("background","#333"):$(a).parent("div").css("background","#fafafa");for(var d=0;d<b.length;d++){var e=document.createElement("li"),f=document.createElement("span");$(e).attr("data-lookup",d),$(f).html(b[d].displayText).css({"font-size":b[d].size,"font-family":b[d].style,"line-height":b[d].lineHeight,"font-weight":b[d].weight,color:b[d].fill,width:"auto","text-shadow":"none"}),$(e).append(f),$(a).append(e)}c&&c()},AddTextItems.prototype.buildTextJSON=function(a){var b,c;c=[],b=JSON.parse(this.jsonObjs[a].JSON.replace('{"objects":',"").replace(',"background":"#fafafa"}',"")),console.log(b);for(var d=0;d<b.length;d++){var e={originX:b[d].originX,originY:b[d].originY,left:b[d].left,top:b[d].top,width:b[d].width,height:b[d].height,fill:b[d].fill,stroke:b[d].stroke,strokeWidth:b[d].strokeWidth,strokeDashArray:b[d].strokeDashArray,strokeLineCap:b[d].strokeLineCap,strokeLineJoin:b[d].strokeLineJoin,strokeMiterLimit:b[d].strokeMiterLimit,scaleX:b[d].scaleX,scaleY:b[d].scaleY,angle:b[d].angle,flipX:b[d].flipX,flipY:b[d].flipY,opacity:b[d].opacity,shadow:b[d].shadow,visible:b[d].visible,clipTo:b[d].clipTo,backgroundColor:b[d].backgroundColor,fillRule:b[d].fillRule,globalCompositeOperation:b[d].globalCompositeOperation,rx:b[d].rx,ry:b[d].ry,radius:b[d].radius,radius:b[d].radius};switch(b[d].type){case"rect":var f=new fabric.Rect(e);break;case"i-text":var f=new fabric.IText(b[d].text,e);break;case"circle":var f=new fabric.Circle(e);break;case"triangle":var f=new fabric.Triangle(e)}pages[currentPageRef].fabric.add(f),pages[currentPageRef].fabric.renderAll()}},AddTextItems.prototype.textControls=function(){var a,b,c,d,e,f;f=this,a="#addText",b=this.textThemes[0],c=this,d=b.length,e=0,this.buildTextHTML(a,b,!1),$("#assetsText").on("click","#changeTextTheme",function(){$("#assetsText").find(".loading").fadeIn(400,function(){e+=1,e==f.textThemes.length&&(e=0),b=f.textThemes[e],f.buildTextHTML(a,b,function(){$("#assetsText").find(".loading").fadeOut(400)})})}),$("#addText").on("click","li",function(){var a,c;a=$(this).attr("data-lookup"),c=b[a].text,f.addIText(c,b,a)}),$("#listTextThemes").on("click","a",function(){console.log(this);var a=$(this).attr("data-lookUp");c.buildTextJSON(a)})},AddTextItems.prototype.init=function(){this.assetsThemes(),this.textControls()},LoadAssets.prototype.getLogo=function(){logoPath="http://192.168.0.216/lifebuyimages/"+this.userInfo.id2+"/Assets/PublicPortal/Logo.png"},LoadAssets.prototype.displayProductInfo=function(){var a,b;a=this,b=$("#productInformation"),b.find(".description").html(a.productData.description),b.find(".itemName").html(a.productData.itemName),b.find(".price").html("$ "+a.productData.unitPrice),b.find(".productImage").attr("src","assets/img/products/"+a.productData.id+".jpg"),$(".productLabel").html(a.productData.description)},LoadAssets.prototype.advancedYou=function(){var a=this,b=this.defaults;new ServerRequest("http://192.168.0.216/AdvAPI/api/WPIValues/"+this.userInfo.id1,"GET",null,function(c){var d;$.each(c,function(b){0==b&&(firstPortraitImgPath="http://192.168.0.216"+this.portraitImageServerPath),a.userImages.push({ID:b,Path:"http://192.168.0.216"+this.portraitImageServerPath}),"undefined"==typeof d?d=b:d++});new ServerRequest("http://192.168.0.216/AdvAPI/api/WGIValues/AdvancedYou/"+a.userInfo.id1,"GET",null,function(c){$.each(c,function(b){0==b&&(firstGroupImgPath="http://192.168.0.216"+this.groupImageServerPath),a.userImages.push({ID:d+b,Path:"http://192.168.0.216"+this.groupImageServerPath})}),a.getLogo(),a.userImages.push({ID:a.userImages.length,Path:logoPath});new ListBuilder("listImages",a.userImages,!0,function(){new ServerRequest("http://192.168.0.216/AdvAPI/api/WSIValues/Popular","GET",null,function(c){$.each(c,function(b){a.stockImages.push({ID:this.id,Path:"http://192.168.0.216/"+this.thumbnailPath,Category:this.category})});new ListBuilder(b.wrapStockImages,a.stockImages,!0,function(){a.layoutBuilder()})})})})})},LoadAssets.prototype.layoutAssetsListener=function(){var a=this,b=this.defaults;$(b.selectCategories).on("change",function(){var c=this;$(this).css("z-index","101"),$(b.loader).fadeIn(),a.stockImages=[],$("#"+b.wrapStockImages).empty(),setTimeout(function(){new ServerRequest("http://192.168.0.216/AdvAPI/api/WSIValues/"+$(c).val(),"GET",null,function(c){$.each(c,function(b){a.stockImages.push({ID:this.id,Path:"http://192.168.0.216/"+this.thumbnailPath,Category:this.category})});new ListBuilder(b.wrapStockImages,a.stockImages,!0,function(){new AddImages("update")});$(this).css("z-index","auto"),$(b.loader).fadeOut()})},1e3)})},LoadAssets.prototype.layoutBuilder=function(){var a=this,b=this.defaults;new ServerRequest("http://192.168.0.216/AdvAPI/api/WSIValues","GET",null,function(c){$.each(c,function(a){var c=document.createElement("option");$(c).html(this.category).val(this.category),$(b.selectCategories).append(c)}),a.layoutAssetsListener(),a.callback()})},LoadAssets.prototype.init=function(){switch(this.displayProductInfo(),this.defaults={header:"header",selectCategories:"#select-categories",wrapImages:"listImages",wrapStockImages:"stockImages",loader:"#aside-loader",yourPhotosTab:"#tab-yourPhotos",wrapYourImages:"#assetsImages"},this.website){case"advancedyou-school":case"advancedyou-sports":case"advancedyou-family":this.advancedYou();break;case"layoutBuilder":$(this.defaults.yourPhotosTab).parent().addClass("hidden"),$(this.defaults.wrapYourImages).addClass("hidden"),this.layoutBuilder()}new ListBuilder("listTextThemes",this.jsonObjs,!0)},CanvasGrid.prototype.build=function(a,b,c){var d;d=document.createElement("div"),$(d).attr("id",a).addClass(b).css(c),$("#grid").append(d)},CanvasGrid.prototype.cropMarksInit=function(){var a=document.createElement("img");$(a).attr("src","http://www.advancedimage.com.au/CreateJS/CanvasOverlay/"+productData.id+"-"+pages[currentPageRef].orientation+".svg").css({width:"100%",height:"100%",top:"0",left:"0"}),$("#grid").append(a)},CanvasGrid.prototype.init=function(){switch($("#grid").empty(),this.type){case"cropMarks":this.cropMarksInit()}},EventManager.prototype.getDimensions=function(a,b){$("#wrapAssets").css("height",window.innerHeight-($("header").height()+60)+"px"),$("main").css("height",window.innerHeight-($("header").height()+10)+"px"),b("resize")},EventManager.prototype.updateJson=function(){$.each(pages,function(){this.json=JSON.stringify(this.fabric),this.jsonObj=JSON.parse(this.json.replace(',"background":"#fff"}',"").replace('{"objects":',"").replace(";",""))})},EventManager.prototype.windowResize=function(){function a(){e.getDimensions("getDimensions",function(a){f=new CanvasSetup(a,function(){insertJSON=new InsertJSON("standard",function(){$("#canvas-loader").fadeOut(800),cropMarks&&(g=new CanvasGrid("cropMarks"))})})}),new Date-b<d?setTimeout(a,d):c=!1}var b,c,d,e,f,g;e=this,b=new Date(1,1,2e3,12,0,0),c=!1,d=200,$(window).resize(function(){e.updateJson(),$("#canvas-loader").css("display","block"),b=new Date,c===!1&&(c=!0,setTimeout(a,d))})},EventManager.prototype.init=function(){"windowResize"==this.type&&this.windowResize()},InsertJSON.prototype.insert=function(){$.each(pages,function(a,b){this.fabric.loadFromJSON('{"objects":'+JSON.stringify(this.jsonObj)+',"background":"#fff"}'),this.fabric.json='{"objects":'+JSON.stringify(this.jsonObj)+',"background":"#fff"}',this.fabric.renderAll()}),this.callback()},InsertJSON.prototype.removeItems=function(){$.each(pages,function(a){var b=a,c=[];$.each(this.jsonObj,function(a){this.left-this.width/2>pages[b].jsonObj[a].width?(c.push(a),console.log("Index: ",a,"item remove",this.left,"placeholder width: ",pages[b].jsonObj[0].width)):this.top-this.height/2>pages[b].jsonObj[0].height?(console.log("Index: ",a,"item remove",this.top,"placeholder width: ",pages[b].jsonObj[0].height),c.push(a)):this.left+this.width/2<-1?(c.push(a),console.log("Index: ",a,"item left",this.left," width: ",this.width)):this.top+this.height/2<-1&&(c.push(a),console.log("Index: ",a,"item top",this.top," width: ",this.height))})}),this.insert()},InsertJSON.prototype.init=function(){this.removeItems()},SearchAndReplace.prototype.imageReplace=function(){$.each(pages,function(a,b){$.each(this.jsonObj,function(){if("image"==this.type){var a=this.src.search("(portraitimage)");a>0&&(console.log("test: ",firstPortraitImgPath),this.src=firstPortraitImgPath);var b=this.src.search("(schoolgroup)");b>0&&(this.src=firstGroupImgPath);var c=this.src.search("(logo)");c>0&&(this.src=logoPath)}})}),this.callback()},SearchAndReplace.prototype.replaceText=function(){var a=this;$.each(pages,function(b,c){$.each(this.jsonObj,function(){"undefined"!=typeof this.text&&(this.text=this.text.replace("(fullname)",a.userInfo.firstName+" "+a.userInfo.lastName).replace("(firstname)",a.userInfo.firstName.replace("%20","")).replace("(lastname)",a.userInfo.lastName.replace("%20","")).replace("(year)",todaysDate.slice(0,4)))})}),this.imageReplace()},SearchAndReplace.prototype.init=function(){return console.log("search and replace working",pages," USER INFO: ",this.userInfo," website",this.website),"layoutBuilder"==this.website?void this.callback():void this.replaceText()},CanvasSetup.prototype.setWrapper=function(){$("#wrapAssets").css("height",window.innerHeight-($("header").height()+60)+"px"),$("main").css("height",window.innerHeight-($("header").height()+10)+"px"),$("aside").css("height",window.innerHeight-$("header").height()+"px")},CanvasSetup.prototype.setJsonDimensions=function(a){var b;b=a/pages[0].jsonObj[0].width,$.each(pages,function(){$.each(this.jsonObj,function(a,c){switch(0==a&&(this.selectable=!1),this.width=this.width*b,this.height=this.height*b,this.left=this.left*b,this.top=this.top*b,this.type){case"i-text":this.fontSize=this.fontSize*b;break;case"circle":this.radius=this.radius*b}})}),this.callback()},CanvasSetup.prototype.setDimensions=function(){var a,b;$.each(pages,function(c,d){if("landscape"==this.orientation){var e;e=$("main").innerHeight()/$("main").innerWidth()<.7?.56:.72,a=$("main").innerWidth()*e,b=a*this.landscape.ratio,this.fabric.setWidth(a),this.fabric.setHeight(b),this.canvas.width=a,this.canvas.height=b,$("#grid").css({height:b+"px",width:a+"px"})}else e=$("main").innerWidth()/$("main").innerHeight()>.9?.85:.55,b=$("main").innerHeight()*e,a=b*this.portrait.ratio,this.fabric.setWidth(a),this.fabric.setHeight(b),this.canvas.width=a,this.canvas.height=b,$("#grid").css({height:b+"px",width:a+"px"})}),this.setJsonDimensions(a)},CanvasSetup.prototype.init=function(){if("new"==this.type){for(var a=0;a<pages.length;a++){var b="canvas-"+a;pages[a].fabric=new fabric.Canvas(b,{backgroundColor:"#fff",selection:!1})}$(".canvas-container").css({position:"absolute",bottom:"2em"}),this.setDimensions()}else $.each(pages,function(a,b){this.canvas.width=0,this.canvas.height=0}),this.setDimensions()},AppInit.prototype.controllers=function(){new Palette(!1),new ExportJson(this.type,this.website,this.userId,this.userName,this.id1),new RotateCanvas("rotate",function(){$("#canvas-loader").fadeIn(400,function(){canvasInit=new CanvasSetup("rotate",function(){insertJSON=new InsertJSON("standard",function(){cropMarks&&(cropMarksInit=new CanvasGrid("cropMarks")),setTimeout(function(){$("#canvas-loader").fadeOut(800)},400)})})})}),new SaveCanvas},AppInit.prototype.buildCanvas=function(){var a,b=this;new CanvasSetup("new",function(){new SearchAndReplace(b.website,b.userInfo,function(){new InsertJSON("standard",function(){cropMarks&&(a=new CanvasGrid("cropMarks"));new EventManager("windowResize");b.controllers(),setTimeout(function(){pages[currentPageRef].fabric.renderAll(),$("#canvas-loader").fadeOut(800)},1400)})})})},AppInit.prototype.asideInit=function(){var a=this;new LoadAssets(this.website,this.userInfo,productData,function(){new ImageUploader(a.userId,null,"Guests",function(){new ScrollManager("wrapAssets","div"),new AddTextItems,new AddImages("pageLoad");$("#aside-loader").fadeOut(800),a.buildCanvas()})})},AppInit.prototype.pushProductData=function(){var a;a=this;new ServerRequest("http://192.168.0.216/AdvAPI/api/WCAPValues/Photocreate/"+this.productId,"GET",!1,function(b){if(productData={costCode:b[0].costCode,cropRatio:b[0].cropRatio,description:b[0].description,descriptionURL:b[0].descriptionURL,fheightMM:b[0].fheightMM,fwidthMM:b[0].fwidthMM,groupName:b[0].groupName,heightMM:b[0].heightMM,id:b[0].id,itemName:b[0].itemName,maxQuantity:b[0].maxQuantity,numberOfPages:b[0].numberOfPages,pcCode:b[0].numberOfPages,postage:b[0].postage,price:b[0].price,unitPrice:b[0].unitPrice,widthMM:b[0].widthMM},productData.widthMM!=productData.fwidthMM&&productData.heightMM!=productData.fwidthMM){var c,d,e,f;c=productData.fwidthMM/productData.widthMM,d=productData.fheightMM/productData.heightMM,e=productData.fheightMM/productData.heightMM,f=productData.fwidthMM/productData.widthMM,cropMarks.push({portrait:{xRatio:c,yRatio:d},landscape:{xRatio:e,yRatio:f}})}else cropMarks=!1;a.asideInit()})},AppInit.prototype.init=function(){var a,b,c,d;a=this,layoutData={id:a.layoutId},b=[];var e=(new PageStyle(this.website,this.userInfo.id3,this.type),new ServerRequest("http://192.168.0.216/AdvAPI/api/CurrentDate","GET",!1,function(a){todaysDate=a}),this.jsonId.split("_"));$.each(e,function(f){new ServerRequest("http://192.168.0.216/AdvAPI/api/WJValues/"+this,"GET",null,function(g){var h,i,j,k,l;i={height:"",width:""},h=JSON.parse(g.json.replace(',"background":"#fff"}',"").replace('{"objects":',"").replace(";","")),i.height=h[0].height,i.width=h[0].width,i.width>i.height?(j={width:i.width,height:i.height,ratio:i.height/i.width},k={width:i.height,height:i.width,ratio:i.height/i.width},l="landscape"):i.width<=i.height&&(j={height:i.height,width:i.width,ratio:i.width/i.height},k={height:i.width,width:i.height,ratio:i.width/i.height},l="portrait"),pages.push({id:g.pageNumber,json:g.json,jsonId:g.jsonID,jsonObj:JSON.parse(g.json.replace(',"background":"#fff"}',"").replace('{"objects":',"").replace(";","")),ref:f,portrait:k,landscape:j,orientation:l,fabric:d,canvas:{width:"",height:""}}),f+1==e.length&&(b={template:"template-wrap-canvas",wrap:"main-wrap",label:"wrap-canvas",name:"canvasWrap"},c=new ElementBuilder(b,pages,function(){if(pages.length>1){var b={name:"canvasPagnation",wrap:"nav-pages",label:"nav-page-"};new ElementBuilder(b,pages,function(){new Pagnation("nav-pages")})}a.pushProductData()}))})})};